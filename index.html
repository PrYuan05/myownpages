<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>坦派斯特建國・期中考特訓版 (V14 最終定案)</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;700;900&display=swap" rel="stylesheet">

    <!-- MathJax -->
    <script>
    MathJax = {
      tex: { inlineMath: [['$', '$'], ['\\(', '\\)']], displayMath: [['$$', '$$']] },
      svg: { fontCache: 'global' }
    };
    </script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

    <style>
        body { 
            font-family: 'Noto Sans TC', sans-serif; 
            background-color: #e0f2fe; 
            background-image: radial-gradient(#bae6fd 1px, transparent 1px);
            background-size: 20px 20px;
        }
        
        ::-webkit-scrollbar { width: 8px; height: 8px; }
        ::-webkit-scrollbar-track { background: #f0f9ff; }
        ::-webkit-scrollbar-thumb { background: #38bdf8; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #0ea5e9; }

        .glass-panel {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.6);
            box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.1);
        }
        
        .note-card { transition: all 0.2s ease; }
        .note-card:hover { transform: translateY(-2px); box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1); }

        .draggable-item { cursor: grab; user-select: none; }
        .draggable-item:active { cursor: grabbing; }
        .drop-zone { transition: all 0.3s; }
        .drop-zone.drag-over { background-color: #d1fae5; border-color: #10b981; transform: scale(1.02); }

        mjx-container[jax="CHTML"][display="true"] { margin: 0.2em 0 !important; display: inline-block !important; }
        
        /* Highlighting */
        .highlight { background: linear-gradient(120deg, rgba(255,255,255,0) 0%, rgba(254, 240, 138, 0.6) 100%); padding: 0 4px; font-weight: bold; color: #b45309; }
        .keyword { color: #0369a1; font-weight: bold; }
        .heart-text { color: #e11d48; font-weight: bold; }
        .blue-text { color: #2563eb; font-weight: bold; }
        
        /* Tags */
        .tag-author { background-color: #e0e7ff; color: #4338ca; padding: 2px 6px; border-radius: 4px; font-size: 0.8em; margin-right: 6px; font-weight: bold; }
        .tag-note { background-color: #dcfce7; color: #15803d; padding: 2px 6px; border-radius: 4px; font-size: 0.8em; margin-right: 6px; font-weight: bold; }
        .tag-analysis { background-color: #ffedd5; color: #c2410c; padding: 2px 6px; border-radius: 4px; font-size: 0.8em; margin-right: 6px; font-weight: bold; }
        
        /* Animation */
        @keyframes popIn {
            0% { transform: scale(0.8) translateY(20px); opacity: 0; }
            60% { transform: scale(1.05) translateY(-10px); opacity: 1; }
            100% { transform: scale(1) translateY(0); }
        }
        .victory-anim { animation: popIn 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards; }
        
        .victory-img {
            filter: drop-shadow(0 10px 20px rgba(0,0,0,0.15));
            transition: transform 0.3s;
        }
        .victory-img:hover { transform: scale(1.1) rotate(5deg); }
    </style>
</head>
<body class="text-slate-800 h-screen flex flex-col overflow-hidden">

    <!-- Top Bar -->
    <header class="bg-white/90 backdrop-blur-md border-b border-sky-200 z-20 flex-none shadow-sm h-16">
        <div class="max-w-7xl mx-auto px-4 h-full flex items-center justify-between">
            <div class="flex items-center gap-3">
                <div class="w-10 h-10 rounded-full bg-sky-400 flex items-center justify-center text-white text-xl font-bold shadow-lg shadow-sky-200 animate-pulse">
                    <i class="fa-solid fa-face-smile"></i>
                </div>
                <div>
                    <h1 class="text-lg font-black text-slate-700 tracking-tight">坦派斯特・建國衝刺班</h1>
                    <p class="text-xs text-sky-600 font-bold">V14 最終定案版</p>
                </div>
            </div>
            
            <div class="flex items-center gap-2 md:gap-4 bg-slate-100/80 px-4 py-2 rounded-full border border-slate-200 shadow-inner overflow-x-auto">
                <div class="flex items-center gap-2 shrink-0" title="魔素">
                    <i class="fa-solid fa-bolt text-yellow-500"></i>
                    <span id="res-magic" class="font-mono font-bold text-slate-700">0</span>
                </div>
                <div class="w-px h-4 bg-slate-300 shrink-0"></div>
                <div class="flex items-center gap-2 shrink-0" title="草藥">
                    <i class="fa-solid fa-leaf text-green-500"></i>
                    <span id="res-herb" class="font-mono font-bold text-slate-700">0</span>
                </div>
                <div class="w-px h-4 bg-slate-300 shrink-0"></div>
                <div class="flex items-center gap-2 shrink-0" title="等級">
                    <i class="fa-solid fa-chess-rook text-sky-600"></i>
                    <span id="res-level" class="font-bold text-slate-700">Lv.1 村莊</span>
                </div>
            </div>

            <div class="flex gap-2">
                <button onclick="shareApp()" class="hidden md:flex bg-slate-200 text-slate-600 px-4 py-2 rounded-full text-sm font-bold hover:bg-slate-300 transition">
                    <i class="fa-solid fa-share-nodes mr-2"></i> 分享
                </button>
                <button onclick="openQuizSelector()" class="hidden md:flex bg-gradient-to-r from-sky-500 to-blue-600 text-white px-5 py-2 rounded-full text-sm font-bold shadow-lg shadow-sky-200 hover:scale-105 transition">
                    <i class="fa-solid fa-dungeon mr-2"></i> 討伐任務
                </button>
            </div>
        </div>
    </header>

    <!-- Main Layout -->
    <div class="flex flex-1 overflow-hidden">
        
        <!-- Sidebar -->
        <nav class="w-64 bg-white/80 border-r border-sky-100 flex-none hidden md:flex flex-col backdrop-blur">
            <div class="p-4 space-y-1 overflow-y-auto flex-1 custom-scrollbar">
                <div class="mb-6 px-2 text-center">
                    <div class="w-full h-32 bg-sky-100 rounded-xl mb-2 flex items-center justify-center text-sky-300 text-6xl shadow-inner">
                        <i class="fa-solid fa-dragon"></i>
                    </div>
                    <div class="text-xs text-slate-400 font-bold">"利姆路大人說：<br>選項是隨機的，要看清楚喔！"</div>
                </div>

                <p class="px-3 text-xs font-bold text-slate-400 uppercase tracking-wider mb-2">管理與建設</p>
                <button onclick="switchView('city')" id="nav-city" class="nav-item w-full text-left p-3 rounded-xl flex items-center gap-3 bg-sky-50 text-sky-700 font-bold border border-sky-100 mb-2 transition-all">
                    <i class="fa-solid fa-city w-6 text-center"></i> 城邦概況 City
                </button>

                <p class="px-3 text-xs font-bold text-slate-400 uppercase tracking-wider mb-2 mt-4">學科修煉</p>
                <div id="sidebar-subjects" class="space-y-1"></div>
            </div>
        </nav>

        <!-- Main Content Area -->
        <main class="flex-1 overflow-y-auto relative scroll-smooth p-4 md:p-8" id="main-container">
            <!-- Dynamic Content -->
        </main>
    </div>

    <!-- Quiz Modal -->
    <div id="quiz-modal" class="fixed inset-0 z-50 hidden transition-opacity duration-300" aria-labelledby="modal-title" role="dialog" aria-modal="true">
        <div class="fixed inset-0 bg-slate-900/60 backdrop-blur-sm transition-opacity" onclick="closeQuizModal()"></div>
        <div class="fixed inset-0 z-10 overflow-y-auto pointer-events-none">
            <div class="flex min-h-full items-center justify-center p-4 text-center sm:p-0">
                <div class="pointer-events-auto relative transform overflow-hidden rounded-3xl bg-white text-left shadow-2xl transition-all sm:my-8 sm:w-full sm:max-w-3xl border-4 border-sky-200 flex flex-col max-h-[90vh]">
                    
                    <div class="bg-gradient-to-r from-sky-500 to-blue-600 px-6 py-4 flex justify-between items-center shrink-0">
                        <h3 class="text-lg font-bold text-white flex items-center gap-2">
                            <i class="fa-solid fa-khanda"></i>
                            <span id="quiz-modal-title">魔物討伐戰</span>
                        </h3>
                        <div class="flex items-center gap-3">
                            <div class="bg-black/20 px-3 py-1 rounded-full text-white text-xs font-mono">
                                <i class="fa-solid fa-heart text-red-400 mr-1"></i>HP: <span id="quiz-hp">3</span>
                            </div>
                            <button onclick="closeQuizModal()" class="text-white/80 hover:text-white transition"><i class="fa-solid fa-xmark text-xl"></i></button>
                        </div>
                    </div>

                    <div class="px-6 py-6 overflow-y-auto custom-scrollbar flex-1 bg-sky-50/30">
                        <!-- Selector -->
                        <div id="quiz-selector" class="grid grid-cols-2 md:grid-cols-4 gap-4"></div>
                        
                        <!-- Question -->
                        <div id="quiz-question-view" class="hidden max-w-2xl mx-auto w-full">
                            <div class="w-full bg-slate-200 rounded-full h-3 mb-6 overflow-hidden border border-slate-300">
                                <div id="quiz-progress-bar" class="bg-gradient-to-r from-green-400 to-emerald-500 h-3 rounded-full transition-all duration-500" style="width: 0%"></div>
                            </div>
                            <div id="question-card" class="bg-white p-6 rounded-2xl shadow-lg border border-sky-100 min-h-[300px] flex flex-col justify-center"></div>
                        </div>

                        <!-- Results (Integrated Layout to fix popup issues) -->
                        <div id="quiz-results-view" class="hidden flex-col items-center justify-center py-8 victory-anim">
                            <div class="relative w-48 h-48 mx-auto mb-6">
                                <!-- User's Custom Image Slot -->
                                <img src="rimuru_victory.png" 
                                     onerror="this.src='https://cdn-icons-png.flaticon.com/512/4712/4712009.png'"
                                     class="w-full h-full object-contain victory-img" alt="Victory">
                            </div>
                            
                            <h2 class="text-4xl font-black text-slate-800 mb-2 drop-shadow-sm">討伐大成功！</h2>
                            <p id="result-msg" class="text-slate-500 mb-8 font-bold">戰利品已送達城邦倉庫</p>
                            
                            <div class="flex justify-center gap-6 mb-8">
                                <div class="bg-white p-4 rounded-2xl shadow-md border-2 border-yellow-100 w-32 flex flex-col items-center">
                                    <div class="text-xs text-slate-400 font-bold uppercase mb-1">魔素</div>
                                    <div id="reward-magic" class="text-3xl font-black text-yellow-500">+0</div>
                                </div>
                                <div class="bg-white p-4 rounded-2xl shadow-md border-2 border-green-100 w-32 flex flex-col items-center">
                                    <div class="text-xs text-slate-400 font-bold uppercase mb-1">草藥</div>
                                    <div id="reward-herb" class="text-3xl font-black text-green-500">+0</div>
                                </div>
                            </div>

                            <button onclick="closeQuizModal()" class="bg-gradient-to-r from-sky-500 to-blue-600 text-white px-10 py-3 rounded-xl font-bold hover:shadow-lg hover:scale-105 transition transform">
                                返回城邦
                            </button>
                        </div>
                    </div>

                    <div id="quiz-footer" class="bg-white px-6 py-4 border-t border-slate-100 flex justify-between items-center shrink-0 hidden">
                        <button onclick="useHerb()" id="btn-use-herb" class="text-green-600 font-bold text-sm hover:bg-green-50 px-3 py-1 rounded transition flex items-center gap-1">
                            <i class="fa-solid fa-leaf"></i> 使用草藥提示 (-1)
                        </button>
                        <button id="btn-next" onclick="nextQuestion()" class="bg-sky-600 text-white px-6 py-2 rounded-lg font-bold text-sm hover:bg-sky-500 transition shadow-md opacity-50 cursor-not-allowed" disabled>
                            下一題 Next <i class="fa-solid fa-arrow-right ml-1"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- JAVASCRIPT LOGIC -->
    <script>
        // --- GAME STATE ---
        const gameState = {
            magicules: 1700,
            herbs: 5,
            level: 1,
            buildings: { 'village': true, 'blacksmith': false, 'school': false, 'arena': false, 'castle': false }
        };

        const buildingsInfo = {
            'village': { name: "哥布林村", cost: 0, icon: "campground", desc: "冒險的起點" },
            'blacksmith': { name: "凱金鐵匠鋪", cost: 500, icon: "hammer", desc: "解鎖數學與物理工具" },
            'school': { name: "自由學園", cost: 1200, icon: "school", desc: "提升知識獲取速度" },
            'arena': { name: "武鬥大會", cost: 2500, icon: "trophy", desc: "挑戰高難度測驗" },
            'castle': { name: "魔王城", cost: 5000, icon: "crown", desc: "統治鳩拉大森林" },
            'finale': { name: "終極試煉", cost: 10000, icon: "dragon", desc: "面對最終的挑戰" }
        };

        // --- CONTENT DATA (V11 - Expanded Notes) ---
        const studyData = {
            chinese: { id: 'chinese', title: "國文 Chinese", icon: "pen-nib", color: "violet", summary: "重點：生平、註釋、解析" },
            english: { id: 'english', title: "英文 English", icon: "language", color: "blue", summary: "重點：單字字彙、文法" },
            math: { id: 'math', title: "數學 Mathematics", icon: "calculator", color: "indigo", summary: "範圍：2-1~2-4" },
            biology: { id: 'biology', title: "生物 Biology", icon: "dna", color: "emerald", summary: "範圍：3-2~p134 (循環、運輸)" },
            geography: { id: 'geography', title: "地理 Geography", icon: "earth-asia", color: "sky", summary: "範圍：p31-45 (地形、海岸)" },
            history: { id: 'history', title: "歷史 History", icon: "landmark", color: "amber", summary: "範圍：p27-42 (大航海)" },
            civics: { id: 'civics', title: "公民 Civics", icon: "scale-balanced", color: "rose", summary: "範圍：家庭生活、親屬關係" }
        };

        const notesData = {
            chinese: [
                { 
                    title: "L4 論語選 - 孔子 (Confucius)", 
                    details: [
                        "<span class='tag-author'>作者</span><strong>孔子</strong>：名丘，字仲尼，春秋魯國人。至聖先師，儒家代表，首創私人講學。",
                        "<span class='tag-note'>註釋</span><strong>時習</strong>：時常溫習。 <strong>慍</strong>(ㄩㄣˋ)：生氣、怨恨。 <strong>信</strong>：誠信。 <strong>亦</strong>：也。",
                        "<span class='tag-analysis'>解析</span>1.「學而時習之，不亦說乎」：強調實踐的快樂 (悅)。",
                        "<span class='tag-analysis'>解析</span>2.「有朋自遠方來」：強調以文會友、志同道合的樂趣。",
                        "<span class='tag-analysis'>解析</span>3.「三人行必有我師」：強調隨時隨地向人學習 (擇善而從)。"
                    ]
                },
                { 
                    title: "L5 背影 - 朱自清", 
                    details: [
                        "<span class='tag-author'>作者</span><strong>朱自清</strong>：現代散文家、詩人。風格細膩真摯。",
                        "<span class='tag-note'>註釋</span><strong>躊躇</strong>(ㄔㄡˊ ㄔㄨˊ)：猶豫不決。 <strong>蹣跚</strong>(ㄆㄢˊ ㄕㄢ)：走路緩慢不穩。 <strong>頹唐</strong>：衰老敗落。",
                        "<span class='tag-analysis'>解析</span><strong>關鍵意象</strong>：<strong>紫毛大衣/朱紅橘子</strong> (色彩對比，象徵父愛溫暖)。",
                        "<span class='tag-analysis'>解析</span><strong>動作描寫</strong>：攀、縮、傾 (描繪父親爬月台的艱辛，情感高潮)。",
                        "<span class='tag-analysis'>解析</span><strong>結構</strong>：開頭點題(不忘背影) &rarr; 買橘子(高潮/惜別背影) &rarr; 讀信結尾(再現背影)。"
                    ]
                },
                { 
                    title: "L6 心囚 - 杏林子", 
                    details: [
                        "<span class='tag-author'>作者</span><strong>杏林子</strong>：本名劉俠，罹患類風濕性關節炎，創辦伊甸基金會。",
                        "<span class='tag-note'>註釋</span><strong>禁錮</strong>：監禁。 <strong>名韁利鎖</strong>：被名利束縛。",
                        "<span class='tag-analysis'>解析</span><strong>主旨</strong>：真正的囚禁是內心的枷鎖（成見、慾望）。心靈的自由取決於轉念。"
                    ]
                }
            ],
            english: [
                {
                    title: "1. 單字字彙統整 (Vocabulary)",
                    details: [
                        "<strong>節慶 (Festivals)</strong>：Christmas (聖誕), New Year (新年), Holiday (假期), Celebrate (慶祝)。",
                        "<strong>序數 (Ordinals)</strong>：First (1st), Second (2nd), Third (3rd), Twelfth (12th, 去ve加fth)。",
                        "<strong>動作 (Actions)</strong>：Clap (拍手), Wave (揮手), Touch (碰), Stand (站), Shout (大叫)。",
                        "<strong>其他</strong>：Date (日期), Month (月), Together (一起), Ready (準備好的)。"
                    ]
                },
                {
                    title: "2. 名詞複數變化 (Plurals)",
                    details: [
                        "1. 一般：+s (map&rarr;maps)。",
                        "2. s, x, ch, sh：+es (bus&rarr;buses, watch&rarr;watches)。",
                        "3. 子音+y：去y+ies (city&rarr;cities)。(母音+y直接+s: boys)。",
                        "4. f, fe：去f+ves (leaf&rarr;leaves, wife&rarr;wives)。",
                        "5. 不規則：man&rarr;men, child&rarr;children, mouse&rarr;mice, fish&rarr;fish。"
                    ]
                },
                {
                    title: "3. 現在進行式 (V-ing)",
                    details: [
                        "<strong>句型</strong>：S + Be (am/is/are) + V-ing。",
                        "<strong>規則</strong>：一般+ing；去e+ing (dance&rarr;dancing)；重複字尾+ing (run&rarr;running, swim&rarr;swimming)。"
                    ]
                }
            ],
            biology: [
                { 
                    title: "1. 植物的運輸 (Plant Transport)", 
                    details: [
                        "<strong>維管束</strong>：<span class='text-emerald-600 font-bold'>內木外韌</span>。形成層向內生木質部，向外生韌皮部。",
                        "<strong>木質部</strong>：死細胞，運輸<span class='highlight'>水分/礦物質</span>，單向向上 (蒸散作用)。",
                        "<strong>韌皮部</strong>：活細胞，運輸<span class='highlight'>養分 (糖)</span>，雙向運輸。",
                        "<strong>排列</strong>：雙子葉(環狀/有形成層/年輪)，單子葉(散生/無)。"
                    ]
                },
                { 
                    title: "2. 循環系統 - 心臟 (Heart)", 
                    details: [
                        "<strong>構造</strong>：上房下室。左心室壁最厚(打全身)。",
                        "<strong>血液性質</strong>：<span class='heart-text'>左半邊 (左心房/室)</span> = 充氧血；<span class='blue-text'>右半邊 (右心房/室)</span> = 缺氧血。",
                        "<strong>連接血管</strong>：左心室-主動脈；右心室-肺動脈；左心房-肺靜脈；右心房-大靜脈。",
                        "<strong>瓣膜</strong>：位於心房心室間、心室動脈間，防止血液逆流。"
                    ]
                },
                { 
                    title: "3. 血管與循環路徑", 
                    details: [
                        "<strong>血管</strong>：動脈(壁厚/快)、靜脈(有瓣膜)、微血管(壁薄/交換)。",
                        "<strong>體循環</strong>：左心室&rarr;主動脈&rarr;全身微血管&rarr;大靜脈&rarr;右心房。",
                        "<strong>肺循環</strong>：右心室&rarr;肺動脈(缺氧)&rarr;<span class='highlight'>肺泡微血管(換氣)</span>&rarr;肺靜脈(充氧)&rarr;左心房。"
                    ]
                }
            ],
            math: [
                { 
                    title: "2-1 ~ 2-2 質因數與公因倍數", 
                    details: [
                        "<strong>質數</strong>：只有1和本身兩個因數 (2, 3, 5, 7, 11...)。",
                        "<strong>標準分解式</strong>：\\( 12 = 2^2 \\times 3 \\)。",
                        "<strong>GCD (最大公因數)</strong>：取共同質因數的<span class='highlight'>最小</span>次方。",
                        "<strong>LCM (最小公倍數)</strong>：取所有質因數的<span class='highlight'>最大</span>次方。"
                    ]
                },
                {
                    title: "2-3 ~ 2-4 分數運算",
                    details: [
                        "<strong>加減</strong>：先通分。 <strong>乘法</strong>：分子乘分子，分母乘分母。",
                        "<strong>除法</strong>：乘以倒數。\\( \\frac{a}{b} \\div \\frac{c}{d} = \\frac{a}{b} \\times \\frac{d}{c} \\)。",
                        "<strong>負分數</strong>：奇數個負號為負，偶數個負號為正。"
                    ]
                }
            ],
            geography: [
                { 
                    title: "1. 臺灣的地形特色 (Landforms)", 
                    details: [
                        "<strong>五大地形</strong>：山地(面積最大/約佔2/3)、丘陵、台地、盆地、平原。",
                        "<strong>中央山脈</strong>：縱貫南北，為分水嶺，導致河川東西分流。",
                        "<strong>平原</strong>：多由河川沖積而成，西部主要為平原（嘉南平原最大）。",
                        "<strong>盆地</strong>：臺北盆地（昔為臺北湖，淤積而成）、臺中盆地、埔里盆地。",
                        "<strong>關鍵經緯</strong>：北回歸線 (23.5°N) 通過嘉義水上與花蓮豐濱，區分熱帶與副熱帶氣候。"
                    ]
                },
                { 
                    title: "2. 海岸類型的比較", 
                    details: [
                        "<strong>北部 (岬灣海岸)</strong>：岩層軟硬相間，海岸曲折，多天然良港 (如基隆港)。",
                        "<strong>西部 (沙岸)</strong>：河川堆積盛，海岸平直，多沙灘、沙洲、潟湖。優點：適合養殖漁業、鹽田。缺點：港口少。",
                        "<strong>南部 (珊瑚礁海岸)</strong>：恆春半島，熱帶氣候，裙礁地形。",
                        "<strong>東部 (斷層海岸)</strong>：板塊擠壓，斷層逼近海岸，海岸陡峭平直，水深，少腹地。"
                    ]
                },
                { 
                    title: "3. 天氣與水文特徵", 
                    details: [
                        "<strong>季風氣候</strong>：夏季吹西南季風 (南部多雨)；冬季吹東北季風 (北部/東北部多雨，因地形雨)。",
                        "<strong>特殊天氣</strong>：梅雨 (5-6月滯留鋒)、颱風 (夏秋之際)、寒害 (冬季強烈大陸冷氣團)。",
                        "<strong>河川特性</strong>：<span class='highlight'>坡陡流急</span> (山高水急)、含沙量大 (地質鬆軟)、流量變化大 (荒溪型河川)。",
                        "<strong>主要河川</strong>：濁水溪 (全臺最長)、高屏溪 (流域面積最大)、淡水河 (流量最穩，因基隆河與大漢溪匯流)。"
                    ]
                }
            ],
            history: [
                { 
                    title: "1. 大航海時代 (Age of Discovery)", 
                    details: [
                        "<strong>背景</strong>：16-17世紀，歐洲國家尋找東方香料航路。",
                        "<strong>荷蘭 (南部)</strong>：1624年建<span class='keyword'>熱蘭遮城</span>(大員/行政)、<span class='keyword'>普羅民遮城</span>(赤崁)。轉運貿易(絲/銀/香料)，出口鹿皮、蔗糖。引進黃牛。",
                        "<strong>西班牙 (北部)</strong>：1626年建<span class='keyword'>聖薩爾瓦多城</span>(基隆)、<span class='keyword'>聖多明哥城</span>(淡水)。主要傳播<strong>天主教</strong>，開採硫磺。1642年被荷蘭趕走。",
                        "<strong>郭懷一事件 (1652)</strong>：漢人反抗荷蘭人重稅，荷人聯合原住民鎮壓。"
                    ]
                },
                { 
                    title: "2. 原住民與外來者", 
                    details: [
                        "<strong>傳教與教育</strong>：荷蘭人創立新港文(羅馬拼音)傳教、設學校。",
                        "<strong>經濟活動</strong>：贌社制度(漢人承包與原住民交易)，導致經濟剝削。",
                        "<strong>史前文化</strong>：長濱(舊/火)、大坌坑(新/繩紋陶)、十三行(鐵器)。"
                    ]
                }],
            civics: [
                { 
                    title: "1. 社會規範 (Social Norms)", 
                    details: [
                        "<strong>風俗習慣</strong>：長期累積的生活慣例 (如過年圍爐、中元普渡)。約束力：社會輿論。",
                        "<strong>倫理道德</strong>：評斷是非善惡的標準 (如讓座、孝順、誠實)。約束力：良心譴責。",
                        "<strong>宗教信仰</strong>：對超自然力量的崇拜 (如不吃豬肉、受戒)。約束力：教規/因果報應。",
                        "<strong>法律</strong>：由國家制定。特徵：<span class='highlight'>具有國家強制力</span>。違反受刑罰或行政罰 (最嚴厲的處罰)。"
                    ]
                },
                { 
                    title: "2. 團體的分類 (Social Groups)", 
                    details: [
                        "<strong>血緣團體</strong>：基於血緣或婚姻關係。例：家庭、宗親會。",
                        "<strong>地緣團體</strong>：基於居住地域關係。例：社區管委會、同鄉會、鄰里。",
                        "<strong>業緣團體</strong>：基於工作職業關係。例：工會、醫師公會、商業同業公會。",
                        "<strong>趣緣團體</strong>：基於共同興趣或理想。例：登山社、動漫研究社、讀書會、慈濟功德會。"
                    ]
                },
                { 
                    title: "3. 親屬關係 (Kinship)", 
                    details: [
                        "<strong>配偶</strong>：因婚姻而產生的關係 (無親等之分)。",
                        "<strong>血親</strong>：<br>- 自然血親：有血緣關係 (父母、子女、兄弟)。<br>- 法定血親：經<span class='highlight'>收養</span>程序 (養父母、養子女)。",
                        "<strong>姻親</strong>：<br>- 血親的配偶 (如：嫂嫂、姊夫)。<br>- 配偶的血親 (如：岳父、公婆)。<br>- 配偶的血親的配偶 (如：妯娌、連襟)。"
                    ]
                },
                { 
                    title: "4. 親等計算 (Degrees)", 
                    details: [
                        "<strong>直系</strong>：算代數。父母(1親等)、祖父母(2親等)。",
                        "<strong>旁系</strong>：算到共同祖先再加總。兄弟姊妹(2親等)、堂/表兄弟姊妹(4親等)。",
                        "<strong>限制</strong>：民法規定，旁系血親六親等內不得結婚。"
                    ]
                },
                { 
                    title: "5. 家庭型態與平權", 
                    details: [
                        "<strong>家庭型態</strong>：小家庭(核心)、折衷(三代)、大家庭。現代出現頂客族、單親、重組家庭。",
                        "<strong>平權</strong>：子女姓氏約定、家務分工、繼承權平等、防暴法保護成員。"
                    ]
                }
            ]
        };

        // --- EXPANDED QUESTION BANK (V11 - 30+ Qs per subject) ---
        const qDB = {
            math: [
                {q:"\\( 24 \\) 的標準分解式？",a:["\\( 2^3 \\times 3 \\)","\\( 2 \\times 3 \\times 4 \\)","\\( 2^2 \\times 6 \\)","\\( 8 \\times 3 \\)"],c:0,r:"\\( 24 = 2^3 \\times 3 \\)。"},
                {q:"下列何者與 \\( 12 \\) 互質？",a:["9","8","25","21"],c:2,r:"\\( 12=2^2 \\times 3 \\)，\\( 25=5^2 \\)，無公因數。"},
                {q:"求 \\( (18, 30) \\) 的 GCD？",a:["6","3","2","90"],c:0,r:"\\( 2 \\times 3 = 6 \\)。"},
                {q:"\\( [4, 6] \\) 的 LCM？",a:["24","12","2","4"],c:1,r:"12。"},
                {q:"\\( \\frac{1}{3} + \\frac{1}{4} = ? \\)",a:["\\( \\frac{7}{12} \\)","\\( \\frac{2}{7} \\)","\\( \\frac{1}{12} \\)","\\( \\frac{1}{7} \\)"],c:0,r:"\\( \\frac{4}{12} + \\frac{3}{12} = \\frac{7}{12} \\)。"},
                {q:"\\( \\frac{2}{5} \\times \\frac{10}{3} = ? \\)",a:["\\( \\frac{4}{3} \\)","\\( \\frac{3}{4} \\)","\\( \\frac{20}{8} \\)","\\( \\frac{1}{3} \\)"],c:0,r:"\\( \\frac{4}{3} \\)。"},
                {q:"\\( \\frac{3}{4} \\div \\frac{1}{2} = ? \\)",a:["\\( \\frac{3}{2} \\)","\\( \\frac{3}{8} \\)","\\( \\frac{1}{2} \\)","\\( \\frac{1}{4} \\)"],c:0,r:"\\( \\frac{3}{2} \\)。"},
                {q:"下列何者為質數？",a:["27","29","51","57"],c:1,r:"29。"},
                {q:"\\( -\\frac{1}{2} \\times (-\\frac{4}{5}) \\) 的符號？",a:["正","負","0","不一定"],c:0,r:"正。"},
                {q:"計算 \\( 2^3 \\times 3^2 \\) 與 \\( 2^2 \\times 3^3 \\) 的 GCD？",a:["\\( 2^2 \\times 3^2 \\)","\\( 2^3 \\times 3^3 \\)","\\( 2 \\times 3 \\)","\\( 6 \\)"],c:0,r:"取最小次方。"},
                {q:"120 的相異質因數有幾個？",a:["3","4","5","2"],c:0,r:"2, 3, 5。"},
                {q:"\\( \\frac{5}{6} - \\frac{1}{2} = ? \\)",a:["\\( \\frac{1}{3} \\)","\\( \\frac{4}{4} \\)","\\( \\frac{2}{3} \\)","\\( \\frac{1}{6} \\)"],c:0,r:"\\( \\frac{1}{3} \\)。"},
                {q:"若 a, b 互質，則 \\( [a, b] = ? \\)",a:["\\( a \\times b \\)","1","\\( a+b \\)","\\( a-b \\)"],c:0,r:"相乘。"},
                {q:"\\( ( -\\frac{3}{4} )^2 \\) 的值？",a:["\\( \\frac{9}{16} \\)","\\( -\\frac{9}{16} \\)","\\( \\frac{6}{8} \\)","\\( \\frac{9}{4} \\)"],c:0,r:"正。"},
                {q:"求 42, 63 的 GCD？",a:["21","7","3","1"],c:0,r:"21。"},
                {q:"最接近 -3 的整數？",a:["-3","-2","-4","0"],c:0,r:"-3。"},
                {q:"\\( 3 \\div \\frac{1}{3} = ? \\)",a:["9","1","3","0"],c:0,r:"9。"},
                {q:"下列分數何者最大？",a:["\\( \\frac{3}{4} \\)","\\( \\frac{1}{2} \\)","\\( \\frac{1}{3} \\)","\\( \\frac{2}{5} \\)"],c:0,r:"0.75。"},
                {q:"絕對值小於 10 的質數有幾個？",a:["4","5","3","6"],c:0,r:"2,3,5,7。"},
                {q:"\\( -2 \\frac{1}{3} \\) 的倒數？",a:["\\( -\\frac{3}{7} \\)","\\( 2 \\frac{1}{3} \\)","\\( -\\frac{7}{3} \\)","\\( \\frac{3}{7} \\)"],c:0,r:"\\( -\\frac{3}{7} \\)。"},
                {q:"計算 \\( 12 - 2 \\times [ 5 - (-3) ] \\)",a:["-4","4","-16","80"],c:0,r:"\\( 12 - 2 \\times 8 = 12 - 16 = -4 \\)。"},
                {q:"\\( 100 \\) 的因數個數？",a:["9","8","10","7"],c:0,r:"\\( 100=2^2 \\times 5^2 \\), \\( (2+1)(2+1)=9 \\)。"},
                {q:"\\( -2 \\times (-3) \\times (-4) \\)",a:["-24","24","-9","-14"],c:0,r:"奇數個負號為負。"},
                {q:"\\( | -7 | + | 3 | \\)",a:["10","-4","4","-10"],c:0,r:"7+3=10。"},
                {q:"\\( \\frac{3}{5} + \\frac{1}{2} \\)",a:["\\( \\frac{11}{10} \\)","\\( \\frac{4}{7} \\)","\\( \\frac{1}{10} \\)","\\( \\frac{4}{10} \\)"],c:0,r:"\\( \\frac{6}{10}+\\frac{5}{10} \\)。"},
                {q:"\\( (-2)^3 \\) 與 \\( -2^3 \\)",a:["相等","前者大","後者大","互為倒數"],c:0,r:"皆為 -8。"},
                {q:"最小的質數？",a:["2","1","3","0"],c:0,r:"2。"},
                {q:"\\( \\frac{2}{3} \\times \\frac{9}{4} \\)",a:["\\( \\frac{3}{2} \\)","\\( \\frac{2}{3} \\)","\\( \\frac{1}{2} \\)","\\( \\frac{11}{7} \\)"],c:0,r:"約分後得 3/2。"},
                {q:"\\( 1 \\frac{1}{2} \\div \\frac{3}{2} \\)",a:["1","\\( \\frac{9}{4} \\)","2","\\( \\frac{3}{2} \\)"],c:0,r:"\\( \\frac{3}{2} \\times \\frac{2}{3} = 1 \\)。"},
                {q:"下列何者互質？",a:["14, 15","12, 18","9, 21","2, 4"],c:0,r:"GCD(14,15)=1。"}
            ],
            biology: [
                {q:"心臟的哪一個腔室連接「主動脈」？",a:["左心室","左心房","右心房","右心室"],c:0,r:"左心室。"},
                {q:"血液中負責攜帶氧氣的是？",a:["紅血球","白血球","血小板","血漿"],c:0,r:"紅血球。"},
                {q:"肺循環的路徑起點是？",a:["右心室","左心室","左心房","右心房"],c:0,r:"右心室。"},
                {q:"下列哪條血管流的是「充氧血」？",a:["肺靜脈","肺動脈","上大靜脈","下大靜脈"],c:0,r:"肺靜脈。"},
                {q:"物質交換主要在哪裡進行？",a:["微血管","動脈","靜脈","心臟"],c:0,r:"微血管。"},
                {q:"防止血液倒流的構造「瓣膜」，存在於？",a:["以上皆是","動脈與心室間","靜脈內","心房與心室間"],c:0,r:"心臟與靜脈皆有。"},
                {q:"植物體內運輸水分的構造？",a:["木質部","韌皮部","形成層","表皮"],c:0,r:"木質部。"},
                {q:"木質部的運輸方向？",a:["單向向上","單向向下","雙向","不一定"],c:0,r:"單向向上。"},
                {q:"韌皮部的運輸方向？",a:["雙向","由下往上","由上往下","不一定"],c:0,r:"雙向。"},
                {q:"形成層的功能？",a:["細胞分裂","吸收水分","光合作用","保護"],c:0,r:"細胞分裂。"},
                {q:"年輪是哪一部分形成的？",a:["木質部","韌皮部","形成層","表皮"],c:0,r:"木質部。"},
                {q:"氣孔的主要功能？",a:["氣體交換","吸收水分","光合作用","支撐"],c:0,r:"氣體交換。"},
                {q:"人體最大的消化腺？",a:["肝臟","胃","胰臟","小腸"],c:0,r:"肝臟。"},
                {q:"膽汁的功能？",a:["乳化脂質","分解蛋白質","分解澱粉","吸收水分"],c:0,r:"乳化脂質。"},
                {q:"蛋白質初步分解場所？",a:["胃","口","小腸","大腸"],c:0,r:"胃。"},
                {q:"氨轉化為尿素的場所？",a:["肝臟","腎臟","膀胱","血液"],c:0,r:"肝臟。"},
                {q:"尿液形成的場所？",a:["腎臟","輸尿管","膀胱","尿道"],c:0,r:"腎臟。"},
                {q:"淋巴結的功能？",a:["過濾病原體","製造紅血球","分泌激素","消化"],c:0,r:"防禦。"},
                {q:"肺泡周圍纏繞著什麼血管？",a:["微血管","動脈","靜脈","淋巴管"],c:0,r:"微血管。"},
                {q:"左心房接收來自哪裡的血液？",a:["肺靜脈","主動脈","肺動脈","大靜脈"],c:0,r:"肺靜脈。"},
                {q:"下列何者不含消化酵素？",a:["膽汁","唾液","胃液","胰液"],c:0,r:"膽汁。"},
                {q:"蒸散作用的主要動力？",a:["水分蒸發","根壓","毛細現象","光合作用"],c:0,r:"水分蒸發。"},
                {q:"根毛的功能？",a:["增加吸收面積","保護根尖","行光合作用","運輸"],c:0,r:"增加吸收面積。"},
                {q:"動脈壁的特徵？",a:["厚且彈性佳","薄","有瓣膜","通透性佳"],c:0,r:"厚且彈性佳。"},
                {q:"酵素的特性？",a:["專一性","通用性","消耗性","不可逆"],c:0,r:"專一性。"},
                {q:"血小板功能？",a:["凝血","運氧","防禦","運輸廢物"],c:0,r:"凝血。"},
                {q:"植物葉片下表皮通常？",a:["氣孔較多","氣孔較少","無氣孔","不一定"],c:0,r:"氣孔較多。"},
                {q:"胃蛋白酶的最適pH值？",a:["酸性","中性","鹼性","不一定"],c:0,r:"酸性。"},
                {q:"單子葉植物莖的維管束？",a:["散生","環狀","無維管束","年輪明顯"],c:0,r:"散生。"},
                {q:"人體心臟位於？",a:["胸腔偏左","胸腔偏右","腹腔","背部"],c:0,r:"胸腔偏左。"},
                {q: "關於酵素的敘述，下列何者正確？", a: ["主要成分是葡萄糖", "一種酵素可催化多種反應", "受溫度與酸鹼性影響", "離開生物體即失去活性"], c: 2, r: "酵素成分為蛋白質，具有專一性（一種酵素對應一種反應），活性受溫度與pH值影響。"},
  {q: "酵素在代謝反應中的主要功能為何？", a: ["提供能量", "加速反應進行", "增加產物總量", "作為反應原料"], c: 1, r: "酵素是生物催化劑，主要功能是降低活化能，加速反應速率。"},
  {q: "唾液澱粉酶在胃中會失去活性，主要原因為何？", a: ["溫度太高", "溫度太低", "酸鹼性改變", "受光線照射"], c: 2, r: "唾液呈中性或弱鹼性，胃液呈強酸性，pH值改變導致酵素失去活性。"},

  // --- 植物的運輸 (維管束、蒸散作用) ---
  {q: "植物體內負責運輸水分的構造是？", a: ["木質部", "韌皮部", "形成層", "氣孔"], c: 0, r: "木質部負責由下往上運輸水分與礦物質。"},
  {q: "植物體內負責運輸養分（糖分）的構造是？", a: ["木質部", "韌皮部", "形成層", "根毛"], c: 1, r: "韌皮部負責雙向運輸光合作用產生的養分。"},
  {q: "造成植物莖變粗的主要原因是哪一個構造進行細胞分裂？", a: ["木質部", "韌皮部", "形成層", "表皮"], c: 2, r: "形成層位於木質部與韌皮部之間，向內產生木質部，向外產生韌皮部，使莖加粗。"},
  {q: "下列何種植物的莖內維管束排列呈「散生狀」（無形成層）？", a: ["榕樹", "向日葵", "水稻", "玫瑰"], c: 2, r: "單子葉植物（如水稻、玉米）的維管束呈散生狀，無形成層，莖不會逐年加粗。"},
  {q: "植物體內水分上升的主要動力來源是？", a: ["光合作用", "呼吸作用", "蒸散作用", "消化作用"], c: 2, r: "葉片氣孔蒸發水分產生的拉力（蒸散作用）是水分上升的主要動力。"},
  {q: "植物氣孔的主要功能不包含下列何者？", a: ["水分散失的門戶", "氣體交換的通道", "吸收光能", "調節蒸散作用"], c: 2, r: "吸收光能是葉綠體的功能，氣孔負責氣體進出與水分蒸散。"},
  {q: "若將樹幹環狀剝皮，植物最終死亡的原因是？", a: ["根部得不到水分", "根部得不到養分", "葉子得不到水分", "葉子得不到陽光"], c: 1, r: "環狀剝皮切斷了韌皮部，葉造的養分無法運送到根，導致根部餓死，無法吸水，全株死亡。"},
  {q: "關於植物年輪的敘述，何者正確？", a: ["深色部分細胞大，長得快", "淺色部分細胞小，長得慢", "由韌皮部細胞堆積而成", "顏色深淺與氣候季節有關"], c: 3, r: "年輪由木質部組成。春夏氣候暖雨水多，細胞大色淺（早材）；秋冬冷乾，細胞小色深（晚材）。"},

  // --- 動物的循環 (心臟、血管、血液) ---
  {q: "人類血液中，負責攜帶氧氣的細胞是？", a: ["紅血球", "白血球", "血小板", "血漿"], c: 0, r: "紅血球含有血紅素，主要功能為攜帶氧氣。"},
  {q: "人類血液中，具有防禦功能、能吞噬病菌的是？", a: ["紅血球", "白血球", "血小板", "血漿"], c: 1, r: "白血球負責免疫防禦，可吞噬病原體或產生抗體。"},
  {q: "受傷流血時，負責讓血液凝固的構造是？", a: ["紅血球", "白血球", "血小板", "血漿"], c: 2, r: "血小板破裂後會釋放物質協助血液凝固。"},
  {q: "下列哪一種血管的管壁最厚，富有彈性？", a: ["動脈", "靜脈", "微血管", "淋巴管"], c: 0, r: "動脈需承受心臟打出的高壓血流，故管壁最厚且具彈性。"},
  {q: "量測脈搏時，通常是按壓哪一種血管？", a: ["動脈", "靜脈", "微血管", "淋巴管"], c: 0, r: "脈搏是動脈隨著心臟搏動產生的起伏，故按壓動脈。"},
  {q: "由於管壁薄、血流慢，適合進行物質交換的血管是？", a: ["動脈", "靜脈", "微血管", "淋巴管"], c: 2, r: "微血管管壁僅一層細胞厚，流速慢，利於物質交換。"},
  {q: "人體心臟四個腔室中，哪一個腔室的肌肉壁最厚？", a: ["左心房", "左心室", "右心房", "右心室"], c: 1, r: "左心室需將血液打至全身（體循環），壓力最大，故肌肉壁最厚。"},
  {q: "連接「左心室」的血管是？", a: ["主動脈", "肺動脈", "上大靜脈", "肺靜脈"], c: 0, r: "左心室收縮將充氧血打入主動脈，送往全身。"},
  {q: "下列哪一條血管內流動的是「缺氧血」？", a: ["主動脈", "肺靜脈", "肺動脈", "腦動脈"], c: 2, r: "肺動脈將缺氧血從右心室送往肺部交換氣體，是唯一流缺氧血的動脈。"},
  {q: "瓣膜的主要功能為何？", a: ["加速血液流動", "防止血液逆流", "製造紅血球", "過濾廢物"], c: 1, r: "心臟與靜脈中的瓣膜主要功能是防止血液逆流。"},
  {q: "體循環的路徑起點與終點分別為？", a: ["左心室→右心房", "右心室→左心房", "左心房→右心室", "右心房→左心室"], c: 0, r: "體循環：左心室(起點)→主動脈→全身→上下大靜脈→右心房(終點)。"},
  {q: "肺循環的主要目的是？", a: ["將養分送到肺", "將廢物排出體外", "進行氣體交換，補充氧氣", "過濾血液中的毒素"], c: 2, r: "肺循環將缺氧血送至肺部排出二氧化碳，吸收氧氣變充氧血。"},
  {q: "淋巴系統的主要功能不包含？", a: ["維持體液平衡", "運輸脂肪", "防禦免疫", "運輸氧氣"], c: 3, r: "運輸氧氣是紅血球的功能，淋巴系統無此功能。"},
  {q: "淋巴液最後會匯入哪一種血管回到血液循環？", a: ["動脈", "靜脈", "微血管", "心臟"], c: 1, r: "淋巴管最後匯入上大靜脈（靜脈），回到血液循環。"},
  {q: "複式顯微鏡下觀察小魚尾鰭，判定「動脈」的依據是？", a: ["顏色最紅", "管壁最厚", "血液由主幹流向分支", "血液由分支流向主幹"], c: 2, r: "在顯微鏡下，血流方向由主幹流向分支（微血管）的是小動脈。"},

  // --- 神經系統 (協調與反應) ---
  {q: "人體神經系統的中樞是指？", a: ["腦與脊髓", "腦神經與脊神經", "大腦與小腦", "交感與副交感神經"], c: 0, r: "中樞神經系統包含腦和脊髓。"},
  {q: "神經元中，負責接收訊息的構造通常較短，稱為？", a: ["細胞體", "軸突", "樹突", "神經末梢"], c: 2, r: "樹突負責接收訊息，軸突負責傳出訊息。"},
  {q: "負責掌管意識、記憶、語言、思考的腦區是？", a: ["大腦", "小腦", "腦幹", "脊髓"], c: 0, r: "大腦是意識中樞，負責高級心智活動。"},
  {q: "體操選手走平衡木，主要是哪一個腦區發達？", a: ["大腦", "小腦", "腦幹", "下視丘"], c: 1, r: "小腦負責協調肌肉活動與維持身體平衡。"},
  {q: "被稱為「生命中樞」，控制呼吸、心搏的是？", a: ["大腦", "小腦", "腦幹", "脊髓"], c: 2, r: "腦幹控制呼吸、心跳、吞嚥等維持生命的基本功能。"},
  {q: "手碰到熱鍋立刻縮回，此反應的控制中樞為？", a: ["大腦", "小腦", "腦幹", "脊髓"], c: 3, r: "縮手反射是四肢的緊急反應，由脊髓控制，不經大腦意識。"},
  {q: "「看到紅燈踩煞車」屬於何種反應？", a: ["脊髓反射", "腦幹反射", "意識行為", "本能反應"], c: 2, r: "看到紅燈(受器)→大腦判斷(中樞)→踩煞車(動器)，屬於大腦控制的意識行為。"},
  {q: "下列傳導路徑何者正確？", a: ["受器→感覺神經→中樞→運動神經→動器", "受器→運動神經→中樞→感覺神經→動器", "動器→感覺神經→中樞→運動神經→受器", "中樞→感覺神經→受器→運動神經→動器"], c: 0, r: "神經傳導路徑：受器接感覺神經入中樞，中樞發訊經運動神經至動器。"},
  {q: "植物的「向光性」主要是受什麼因素影響？", a: ["水分分布不均", "生長素分布不均", "溫度高低", "細胞含糖量"], c: 1, r: "莖尖背光側生長素濃度高，生長快，導致莖彎向光源。"},
  {q: "含羞草葉片受碰觸閉合，捕蠅草捕蟲，屬於植物的什麼反應？", a: ["向性(生長反應)", "膨壓運動(水分進出)", "開花反應", "光週期反應"], c: 1, r: "這是因細胞內水分進出造成的膨壓變化，屬於快速的局部運動（觸發運動）。"},

  // --- 內分泌系統 (激素) ---
  {q: "內分泌腺分泌的物質稱為？", a: ["酵素", "激素(荷爾蒙)", "抗體", "神經傳導物質"], c: 1, r: "內分泌腺分泌激素（荷爾蒙），經由血液運輸。"},
  {q: "激素主要的運輸途徑是？", a: ["導管", "神經", "血液", "淋巴"], c: 2, r: "內分泌腺無導管，激素直接進入微血管隨血液循環全身。"},
  {q: "被稱為「內分泌總指揮」，能分泌生長激素的是？", a: ["甲狀腺", "腦垂腺", "腎上腺", "胰島"], c: 1, r: "腦垂腺位於腦下方，分泌生長激素及多種促進激素，調控其他腺體。"},
  {q: "若幼年時期生長激素分泌過多，會導致？", a: ["侏儒症", "巨人症", "大脖子病", "糖尿病"], c: 1, r: "生長激素過多致巨人症，過少致侏儒症。"},
  {q: "會影響細胞代謝速率，分泌過多會導致焦躁、消瘦的腺體是？", a: ["甲狀腺", "副甲狀腺", "腎上腺", "性腺"], c: 0, r: "甲狀腺素促進代謝，過多會造成甲狀腺亢進（消瘦、緊張）。"},
  {q: "人體血鈣濃度過低導致抽筋，可能與哪一個腺體分泌不足有關？", a: ["甲狀腺", "副甲狀腺", "腎上腺", "胰島"], c: 1, r: "副甲狀腺素負責調節血鈣濃度（提升血鈣）。"},
  {q: "遇到緊急狀況（如被狗追）時，血壓上升、心跳加快，是哪種激素作用？", a: ["胰島素", "腎上腺素", "生長激素", "甲狀腺素"], c: 1, r: "腎上腺素協助身體應付緊急狀況（戰或逃反應）。"},
  {q: "能降低血糖濃度，使葡萄糖進入細胞利用的激素是？", a: ["升糖素", "胰島素", "腎上腺素", "甲狀腺素"], c: 1, r: "胰島素是唯一能降低血糖的激素。"},
  {q: "糖尿病患者主要是因為哪一個腺體功能異常？", a: ["腎臟", "肝臟", "胰島", "甲狀腺"], c: 2, r: "胰島分泌的胰島素不足或作用不良導致糖尿病。"},
  {q: "下列關於神經與內分泌系統的比較，何者正確？", a: ["神經作用慢，內分泌作用快", "神經作用範圍廣，內分泌範圍局限", "神經作用短暫，內分泌作用較持久", "兩者皆由導管運輸"], c: 2, r: "神經系統傳導快但短暫；內分泌系統經血液運輸慢但作用持久。"},

  // --- 綜合應用 (41-50) ---
  {q: "飯後一小時，人體血液中哪種激素濃度會明顯上升？", a: ["胰島素", "升糖素", "腎上腺素", "生長激素"], c: 0, r: "飯後血糖升高，胰島素分泌增加以降低血糖。"},
  {q: "飢餓時，血糖降低，哪種激素會分泌以分解肝糖？", a: ["胰島素", "升糖素", "甲狀腺素", "性荷爾蒙"], c: 1, r: "升糖素促進肝糖分解為葡萄糖，提升血糖。"},
  {q: "植物根部表現出「向地性」，莖表現出「背地性」，這與什麼有關？", a: ["水分", "光線", "地心引力", "溫度"], c: 2, r: "受地心引力影響，生長素分布改變，導致根向下、莖向上生長。"},
  {q: "下列哪一種行為不需要大腦意識參與？", a: ["感覺冷穿外套", "聽笑話大笑", "瞳孔遇強光縮小", "背誦英文單字"], c: 2, r: "瞳孔反射由腦幹控制，屬於反射動作。"},
  {q: "小明車禍後變成植物人（有心跳呼吸，但無意識），受損部位最可能是？", a: ["大腦", "小腦", "腦幹", "脊髓"], c: 0, r: "有生命跡象表示腦幹正常，無意識表示大腦受損。"},
  {q: "酒醉走路搖晃不穩，是因為酒精麻痺了哪裡？", a: ["大腦", "小腦", "腦幹", "脊髓"], c: 1, r: "小腦掌管平衡，酒醉步態不穩即因小腦受影響。"},
  {q: "醫生用小鎚敲擊膝蓋下方，腳會踢出，這路徑中樞在哪？", a: ["大腦", "小腦", "脊髓", "腦幹"], c: 2, r: "膝跳反射是四肢的反射，中樞位於脊髓。"},
  {q: "從左心室出發的紅血球，最快要經過心臟幾次才能到達肺部？", a: ["0次", "1次", "2次", "3次"], c: 1, r: "左心室→全身→右心房→右心室(第1次經過心臟)→肺動脈→肺。"},
  {q: "下列哪種生物只有單一循環路徑（心臟只有兩腔室）？", a: ["人類", "青蛙", "魚類", "鳥類"], c: 2, r: "魚類是一心房一心室，單一循環（心臟→鰓→全身→心臟）。"},
  {q: "關於人體體溫調節，天氣熱時血管會如何變化？", a: ["皮膚血管收縮", "皮膚血管擴張", "深層血管擴張", "血管數量增加"], c: 1, r: "天熱時皮膚血管擴張，增加血流量以利散熱。"}
            ],
            chinese: [
                {q:"孔子被尊稱為？",a:["至聖先師","亞聖","詩仙","兵聖"],c:0,r:"至聖先師。"},
                {q:"「學而時習之」的「說」通？",a:["悅","曰","越","月"],c:0,r:"悅。"},
                {q:"「慍」意指？",a:["生氣","快樂","悲傷","害怕"],c:0,r:"生氣。"},
                {q:"朱自清擅長？",a:["散文","小說","戲劇","寓言"],c:0,r:"散文。"},
                {q:"《背影》父親買？",a:["橘子","蘋果","梨子","香蕉"],c:0,r:"橘子。"},
                {q:"「躊躇」意指？",a:["猶豫不決","果斷","快速","緩慢"],c:0,r:"猶豫不決。"},
                {q:"「蹣跚」形容？",a:["走路緩慢不穩","走路穩","跑得快","跳得高"],c:0,r:"走路緩慢不穩。"},
                {q:"杏林子創辦？",a:["伊甸基金會","慈濟","展望會","紅十字"],c:0,r:"伊甸基金會。"},
                {q:"《心囚》主旨？",a:["心靈自由","監獄可怕","健康重要","守法"],c:0,r:"心靈自由。"},
                {q:"分號用於？",a:["並列分句","疑問","感嘆","引文"],c:0,r:"並列分句。"},
                {q:"長頸鹿少睡是為了？",a:["生存","玩耍","覓食","聊天"],c:0,r:"生存。"},
                {q:"「頹唐」意指？",a:["衰老敗落","強壯","年輕","快樂"],c:0,r:"衰老敗落。"},
                {q:"「三人行必有我師」意在？",a:["隨時學習","找老師","結伴","競爭"],c:0,r:"隨時學習。"},
                {q:"朱自清背影中顏色？",a:["紫/紅","黑/白","藍/黃","綠/紅"],c:0,r:"紫毛大衣/朱紅橘子。"},
                {q:"杏林子病症？",a:["類風濕性關節炎","癌症","心臟病","小兒麻痺"],c:0,r:"類風濕性關節炎。"},
                {q:"冒號功能？",a:["總起下文","結束","轉折","疑問"],c:0,r:"總起下文。"},
                {q:"孔子是哪國人？",a:["魯","齊","楚","秦"],c:0,r:"魯國。"},
                {q:"「有朋自遠方來」？",a:["不亦樂乎","不亦君子","不亦說乎","不亦悲乎"],c:0,r:"不亦樂乎。"},
                {q:"朱自清父親體態？",a:["肥胖","瘦弱","高大","矮小"],c:0,r:"肥胖。"},
                {q:"心靈的枷鎖指？",a:["成見/慾望","法律","親情","友情"],c:0,r:"成見與慾望。"},
                {q:"貪睡長頸鹿啟示？",a:["自知之明","多睡","努力","誠實"],c:0,r:"自知之明。"},
                {q:"《論語》體裁？",a:["語錄體","詩歌","小說","散文"],c:0,r:"語錄體。"},
                {q:"「信」意指？",a:["誠信","相信","信件","信號"],c:0,r:"誠信。"},
                {q:"橘子象徵？",a:["父愛","母愛","友誼","離別"],c:0,r:"父愛。"},
                {q:"杏林子本名？",a:["劉俠","陳樹菊","張愛玲","三毛"],c:0,r:"劉俠。"},
                {q:"背影描寫重點？",a:["父親背影","車站風景","火車","路人"],c:0,r:"買橘子的背影。"},
                {q:"「名韁利鎖」比喻？",a:["受名利束縛","騎馬","鎖門","監獄"],c:0,r:"受名利束縛。"},
                {q:"孔子弟子稱？",a:["七十二賢","十八羅漢","三千世界","八仙"],c:0,r:"三千弟子七十二賢。"},
                {q:"朱自清年代？",a:["現代","古代","清朝","明朝"],c:0,r:"現代。"},
                {q:"心囚文體？",a:["議論散文","小說","詩歌","劇本"],c:0,r:"議論散文。"},
                // --- 第四課 論語選 (1-12) ---
  {q: "《論語》一書主要的內容是什麼？", a: ["孔子與弟子、時人的對話錄", "孔子親自撰寫的自傳", "孔子評論時政的文章", "記載孔子周遊列國的遊記"], c: 0, r: "《論語》由孔子弟子及再傳弟子記錄編輯，屬語錄體。"},
  {q: "子游問孝，孔子強調孝順最重要的是什麼？", a: ["能夠奉養父母", "能夠光宗耀祖", "內心存有敬意", "早晚噓寒問暖"], c: 2, r: "孔子云：「不敬，何以別乎？」強調「敬」是人與犬馬之別。"},
  {q: "「譬如為山，未成一簣，止，吾止也。」這句話的意旨為何？", a: ["行百里者半九十", "功虧一簣，責任在己", "萬丈高樓平地起", "天有不測風雲"], c: 1, r: "強調成敗操之在己，放棄了就是失敗，即便只差一筐土。"},
  {q: "曾子曰：「吾日三省吾身。」下列何者**不是**曾子反省的內容？", a: ["為人謀而不忠乎", "與朋友交而不信乎", "傳不習乎", "飲食不節乎"], c: 3, r: "曾子反省的三件事為：忠（盡心）、信（誠信）、習（溫習），未提及飲食。"},
  {q: "「今之孝者，是謂能養。」句中的「養」字意思為何？", a: ["培養品德", "修養身心", "供養父母飲食", "飼養寵物"], c: 2, r: "此處的「養」指物質上的口體奉養。"},
  {q: "「譬如平地，雖覆一簣，進，吾往也。」這句話在勉勵我們什麼？", a: ["學貴有恆", "學貴慎始", "學貴專精", "學貴獨創"], c: 0, r: "只要肯開始並持之以恆，即便只倒了一筐土也是進步。"},
  {q: "關於孔子的敘述，下列何者**錯誤**？", a: ["春秋時期魯國人", "被尊稱為至聖先師", "首開私人講學之風", "主張法治，強調嚴刑峻法"], c: 3, r: "孔子是儒家代表，主張仁愛、德治，法家才強調嚴刑峻法。"},
  {q: "「至於犬馬，皆能有養。」這句話的修辭技巧為何？", a: ["譬喻", "轉化", "類疊", "映襯"], c: 0, r: "這裡雖然沒有明顯喻詞，但將「養父母」與「養犬馬」做類比，含有借喻/類比的意味（或視為對比、比較）。在國中教學中，常強調其「比較」的性質，但也隱含將人降格為獸的諷刺。"},
  {q: "下列哪一個成語源自《論語》本課內容？", a: ["功虧一簣", "見賢思齊", "任重道遠", "以上皆是"], c: 0, r: "「未成一簣」演變為成語「功虧一簣」。"},
  {q: "曾子認為「與朋友交」最重要的是什麼？", a: ["義", "信", "仁", "禮"], c: 1, r: "與朋友交而不「信」乎。"},
  {q: "孔子教學「有教無類」、「因材施教」，這展現了什麼精神？", a: ["政治抱負", "教育家風範", "軍事才能", "藝術修養"], c: 1, r: "這是孔子在教育上的偉大貢獻。"},
  {q: "《論語》中的篇名（如〈學而〉、〈為政〉）是如何制定的？", a: ["依據該篇的主旨", "孔子親自命名", "取首章開頭二三字", "後人隨意抽籤"], c: 2, r: "論語篇名多取自首章開頭的字詞，與該篇內容主旨未必有直接關係。"},

  // --- 第五課 背影 (13-25) ---
  {q: "《背影》一文中，象徵父愛最具體的形象是？", a: ["紫毛大衣", "滿院狼藉", "父親的背影", "來往的書信"], c: 2, r: "「背影」是貫穿全文的線索，象徵父愛。"},
  {q: "朱自清說：「我那時真是聰明過分。」這句話使用了哪種修辭？", a: ["譬喻", "誇飾", "倒反", "轉化"], c: 2, r: "表面說聰明，實則自責當時的愚蠢與不體貼，為「倒反」。"},
  {q: "文中父親費力爬上月臺買橘子，這段描寫主要表現了什麼？", a: ["父親身體不好", "父親固執不知變通", "父親對兒子深沉的愛", "橘子非常珍貴"], c: 2, r: "透過肥胖身軀艱難攀爬的動作，具體呈現父愛。"},
  {q: "「家中光景很是慘澹」是指家中發生了什麼事？", a: ["父親生病且祖母去世", "祖母去世且父親失業", "父親失業且作者生病", "作者休學且祖母去世"], c: 1, r: "祖母過世（喪事）加上父親差使交卸（失業），禍不單行。"},
  {q: "作者在文中流了四次淚，第一次流淚的原因是？", a: ["看見父親買橘子的背影", "讀到父親的來信", "感嘆家道中落與祖母過世", "與父親離別"], c: 2, r: "第一次是在徐州見到父親，面對滿院狼藉與祖母亡故而流淚。"},
  {q: "下列詞語解釋，何者**錯誤**？", a: ["躊躇：猶豫不決", "蹣跚：腳步緩慢不穩", "狼藉：雜亂不整的樣子", "賦閒：身體強壯健康"], c: 3, r: "賦閒是指「失業在家」。"},
  {q: "父親說：「我買幾個橘子去。你就在此地，不要走動。」這句話顯示父親？", a: ["喜歡命令兒子", "擔心兒子迷路或發生意外", "想展現身體硬朗", "想吃橘子"], c: 1, r: "表現出將已成年的兒子仍當作小孩般呵護。"},
  {q: "朱自清在文中兩次提到「那時真是太聰明了」，充滿了什麼樣的情感？", a: ["自豪", "諷刺父親", "懊悔自責", "懷念童年"], c: 2, r: "懊悔當時年輕氣盛，不懂父親的苦心。"},
  {q: "《背影》一文的寫作觀點是？", a: ["第一人稱", "第二人稱", "第三人稱", "全知觀點"], c: 0, r: "以「我」（作者）的視角進行敘述。"},
  {q: "父親選了一張靠近車門的椅子，並用紫毛大衣鋪好座位。這舉動顯示？", a: ["父親愛炫耀財富", "父親怕大衣弄髒", "父親對兒子無微不至的照顧", "父親想自己坐"], c: 2, r: "細微的動作流露父親對兒子舒適度的關心。"},
  {q: "文末父親信中提到「大去之期不遠矣」，意思是指？", a: ["將要出遠門", "將要升官", "離死亡的日子不遠", "將要搬家"], c: 2, r: "「大去」是死亡的委婉說法。"},
  {q: "文中父親穿「黑布大馬褂、深青布棉袍」，作者穿「紫毛大衣」，這顏色的對比暗示？", a: ["父親喜愛深色，作者喜愛亮色", "父親的樸素黯淡對照出給兒子的溫暖與疼愛", "當時流行黑色與紫色", "表示季節是冬天"], c: 1, r: "父親將好的（紫毛大衣）留給兒子，自己穿著樸素沉重，凸顯犧牲奉獻的父愛。"},

  // --- 第六課 心囚 (26-34) ---
  {q: "《心囚》的作者是誰？", a: ["琦君", "杏林子", "陳之藩", "朱自清"], c: 1, r: "作者為杏林子（劉俠）。"},
  {q: "在《心囚》一文中，作者認為真正的「囚犯」是？", a: ["身體殘缺的人", "被關在監獄的人", "心理不健全、自我禁錮的人", "行動不便的人"], c: 2, r: "作者認為心靈的枷鎖才是真正的囚禁。"},
  {q: "作者杏林子雖然身體受困，但她如何讓自己獲得自由？", a: ["透過藥物治療", "透過寫作與信仰，轉變心念", "透過旅行", "透過整型手術"], c: 1, r: "心念的轉變與突破心靈枷鎖是關鍵。"},
  {q: "文中提到「有形的鐐銬」指的是什麼？", a: ["監獄的鐵鍊", "繁重的課業", "病痛對身體的限制", "父母的管教"], c: 2, r: "指類風溼關節炎對她身體活動的限制。"},
  {q: "作者使用「牆角的顯微鏡」來比喻自己，是因為？", a: ["視野狹小", "身體雖受限，卻能細膩觀察生命", "被棄置不用", "價格昂貴"], c: 1, r: "（註：此題為延伸概念，若課文未提及顯微鏡則重點在於「鬥室中看見世界」）課文中提到生活在六席大的斗室，卻活得無憂無慮。更正：課文重點在「心靈的釋放」。"},
  {q: "「一個人的心若死，這世界就再也沒有什麼能困住他的了。」這句話是？", a: ["正面鼓勵", "負面消極", "意思是不怕死", "意思是心死則無藥可救"], c: 0, r: "原文應為「一個人只要能突破心靈的枷鎖...」，若選正面解釋，意指心靈自由則無物可困。"},
  {q: "下列何者**不是**作者提到的「心囚」現象？", a: ["為名利權勢所左右", "迷戀情慾無法自拔", "身體健康但心理失望悲觀", "為了理想而努力奮鬥"], c: 3, r: "為理想奮鬥是正向的，非心囚。"},
  {q: "「譬如為山」與《心囚》兩課在主旨上有何相通之處？", a: ["都強調孝道", "都強調堅持與心念的重要性", "都描寫親情", "都強調交友"], c: 1, r: "為山強調恆心，心囚強調心念的突破，皆重「心」與「毅力」。"},
  {q: "《心囚》一文使用了大量的什麼修辭來增強說服力？", a: ["排比", "映襯（對比）", "轉化", "設問"], c: 1, r: "將「身體的囚禁」與「心靈的自由」，以及「身體健康」與「心靈囚禁」做對比。"},

  // --- 語文常識一：標點符號 (35-42) ---
  {q: "小明要列舉水果：蘋果、香蕉、芭樂。請問水果之間應該用什麼符號？", a: ["逗號（，）", "頓號（、）", "分號（；）", "冒號（：）"], c: 1, r: "語氣短暫停頓，或同類詞語並列時使用頓號。"},
  {q: "如果要引用孔子的話，應該使用什麼符號將話語包起來？", a: ["括號（）", "書名號《》", "引號「」", "破折號——"], c: 2, r: "引用語句或對話使用引號。"},
  {q: "「哈利波特」是一本書的名稱，應該標示為？", a: ["「哈利波特」", "《哈利波特》", "（哈利波特）", "——哈利波特"], c: 1, r: "書名、篇名、電影名等使用書名號。"},
  {q: "當句子還沒說完，或者表示意思未盡時，可以使用什麼符號？", a: ["驚嘆號！", "刪節號……", "破折號——", "問號？"], c: 1, r: "刪節號表示省略或語氣未完。"},
  {q: "下列哪一個標點符號的位置**錯誤**（直書時）？", a: ["句號在字的右側", "頓號在字的中央", "引號在字的上下", "書名號在字的左側"], c: 0, r: "直書時，句號應在字的「下方」或偏右，但在格子中通常居中或偏右下，不可在右側（那是專名號的位置）。**修正**：現代標準直書格式，句號、逗號居中。專名號在左側。書名號也在左側。所以此題若考「位置」，A選項「右側」是錯的（應為左側為專名號，或標點居中）。*註：依教育部重訂標點符號手冊，直書時專名號在左，書名號也在左。句號居中。*"},
  {q: "想要補充說明，或插入與正文較無直接關係的文字，可用什麼符號？", a: ["夾注號（）", "冒號：", "分號；", "逗號，"], c: 0, r: "夾注號用於補充說明。"},
  {q: "「哇！這朵花真美。」句中的驚嘆號表示？", a: ["疑問", "感嘆或驚訝", "語句結束", "停頓"], c: 1, r: "驚嘆號用於感嘆、驚訝或命令。"},
  {q: "關於「分號」的用法，下列何者正確？", a: ["用在疑問句後", "用在並列的短句之間，語氣比逗號重", "用在引文之前", "用在書名上"], c: 1, r: "分號用於隔開複句中並列的分句。"},

  // --- 自學選文二：貪睡的長頸鹿 (43-50) ---
  {q: "《貪睡的長頸鹿》作者是誰？", a: ["王文靜", "張曉風", "廖玉蕙", "簡媜"], c: 0, r: "作者為王文靜。"},
  {q: "為什麼長頸鹿每天只能睡很少的時間？", a: ["因為牠們很勤勞", "因為食物需要吃很久", "因為處於危險的環境，需隨時警覺", "因為牠們脖子太長不舒服"], c: 2, r: "為了躲避獅子等掠食者，必須保持警覺，這是物競天擇的結果。"},
  {q: "作者提到長頸鹿的睡眠時間大約是？", a: ["10小時", "8小時", "30分鐘到2小時（深層睡眠極短）", "完全不睡"], c: 2, r: "文中提到長頸鹿深層睡眠極短，總睡眠時間也很短（約30分-2小時）。"},
  {q: "作者將「長頸鹿」與「獅子」做對比，主要想探討什麼道理？", a: ["動物的生態習性", "職場與人生角色的定位（錯置）", "睡眠對健康的重要", "非洲旅遊的樂趣"], c: 1, r: "藉由動物生存法則，探討人應認清自己的角色與能力，避免「錯置」。"},
  {q: "文中所說的「錯置」是指什麼？", a: ["把東西放錯位置", "搞不清楚自己是誰，沒有獅子的能力卻想過獅子的生活", "在錯誤的時間睡覺", "去錯了國家旅行"], c: 1, r: "指人沒有認清自己的本質，追求不適合自己的位置。"},
  {q: "在職場上，如果能力像長頸鹿，卻想當獅子（領導者），結果通常是？", a: ["會非常成功", "會很痛苦且可能失敗", "會變成斑馬", "會進化成獅子"], c: 1, r: "能力與位置不符（錯置），會導致失敗或痛苦。"},
  {q: "「物競天擇」這句話原本是誰的理論？", a: ["牛頓", "達爾文", "愛因斯坦", "孔子"], c: 1, r: "達爾文的演化論。"},
  {q: "作者在台北木柵動物園看到長頸鹿的睡姿改變了（敢趴著睡），原因是？", a: ["長頸鹿生病了", "環境安逸，沒有天敵威脅", "動物園的地板比較軟", "台灣氣候比較好"], c: 1, r: "環境改變（安全了），行為模式也會跟著改變。"}
            ],
            english: [
                {q:"Stand up. 是？",a:["祈使句","疑問句","倒裝句","感嘆句"],c:0,r:"祈使句。"},
                {q:"Don't ___ (talk).",a:["talk","talking","talks","talked"],c:0,r:"talk。"},
                {q:"Please ___ (open).",a:["open","opens","opening","opened"],c:0,r:"open。"},
                {q:"What ___ you doing?",a:["are","is","am","do"],c:0,r:"are。"},
                {q:"She ___ (read) now.",a:["is reading","reads","read","reading"],c:0,r:"is reading。"},
                {q:"Look! The dog ___.",a:["is running","runs","run","running"],c:0,r:"is running。"},
                {q:"___ (sit) down.",a:["Sit","Sits","Sitting","Sat"],c:0,r:"Sit。"},
                {q:"First month?",a:["January","February","March","April"],c:0,r:"January。"},
                {q:"Second month?",a:["February","January","March","April"],c:0,r:"February。"},
                {q:"___ Christmas?",a:["When is","Where is","Who is","What is"],c:0,r:"When is..."},
                {q:"___ Sunday.",a:["on","in","at","of"],c:0,r:"on。"},
                {q:"___ July.",a:["in","on","at","to"],c:0,r:"in。"},
                {q:"Twelfth is?",a:["12th","12","20","2"],c:0,r:"12th。"},
                {q:"Plural of box?",a:["boxes","boxs","boxies","box"],c:0,r:"boxes。"},
                {q:"Plural of baby?",a:["babies","babys","babyes","baby"],c:0,r:"babies。"},
                {q:"Plural of man?",a:["men","mans","manes","man"],c:0,r:"men。"},
                {q:"___ he like?",a:["Does","Do","Is","Are"],c:0,r:"Does。"},
                {q:"They ___ not.",a:["do","does","is","are"],c:0,r:"do。"},
                {q:"V-ing of run?",a:["running","runing","run","runs"],c:0,r:"running。"},
                {q:"V-ing of dance?",a:["dancing","danceing","dances","dance"],c:0,r:"dancing。"},
                {q:"Let's ___ (go).",a:["go","going","goes","went"],c:0,r:"go。"},
                {q:"Listen! Birds ___.",a:["are singing","sings","sing","singing"],c:0,r:"are singing。"},
                {q:"Plural of wife?",a:["wives","wifes","wivs","wife"],c:0,r:"wives。"},
                {q:"Plural of foot?",a:["feet","foots","feets","foot"],c:0,r:"feet。"},
                {q:"___ (be) quiet.",a:["Be","Do","Are","Is"],c:0,r:"Be。"},
                {q:"Third is?",a:["3rd","3","3th","three"],c:0,r:"3rd。"},
                {q:"__ May 5th.",a:["on","in","at","of"],c:0,r:"on。"},
                {q:"He ___ (write).",a:["is writing","write","writing","writ"],c:0,r:"is writing。"},
                {q:"Plural of bus?",a:["buses","buss","busies","bus"],c:0,r:"buses。"},
                {q:"Don't ___ (sleep).",a:["sleep","sleeping","sleeps","slept"],c:0,r:"sleep。"},{
    q: "We are teachers. _____ school is big.",
    a: ["Our", "Your", "My", "Their"],
    c: 0,
    r: "主詞是 We（我們），使用相對應的所有格代名詞 Our（我們的）。"
  },
  {
    q: "There are two _____ and three _____ in the park.",
    a: ["dog; cat", "dogs; cats", "dog's; cat's", "doges; catss"],
    c: 1,
    r: "two 和 three 後面需接複數名詞，故選 dogs 和 cats。"
  },
  {
    q: "A: Are these your erasers? B: No, they are not. They are _____ .",
    a: ["Tom", "Tom's", "Tom is", "Tom's pen"],
    c: 1,
    r: "They are Tom's（它們是 Tom 的東西），Tom's 為所有格代名詞的省略形，代表 Tom's erasers。"
  },
  {
    q: "請選出正確的複數形：",
    a: ["a bus → two buss", "a fox → two foxs", "a watch → two watchs", "a class → two classes"],
    c: 3,
    r: "字尾是 -s, -x, -sh, -ch 時，需加 -es 變複數。Class → Classes。"
  },
  {
    q: "A: What is _____ in the box? B: It's an apple.",
    a: ["that", "those", "these", "they"],
    c: 0,
    r: "答句使用 It's，表示詢問單數名詞，故選 that（那）或 this。"
  },
  {
    q: "Those new books are _____ .",
    a: ["mine", "my", "I", "me"],
    c: 0,
    r: "空格位於句尾，且表示「我的東西」，需使用所有格代名詞 mine（我的）。"
  },
  {
    q: "Mary has two small _____ and one big _____ .",
    a: ["baby; family", "babies; family", "babies; families", "babies; familys"],
    c: 1,
    r: "子音 + y 結尾的單字，變複數時去 y 加 ies。但 family 只有一個，故 family 為單數。"},
  {
    q: "We have two good _____ at school.",
    a: ["friend", "friends", "friend's", "friend is"],
    c: 1,
    r: "two 後面接複數名詞 friends。"
  },
  {
    q: "A: _____ are these rulers? B: They are ten dollars.",
    a: ["What", "How much", "Where", "How"],
    c: 1,
    r: "答句是金額（ten dollars），問句應詢問價錢，使用 How much。"
  },
  {
    q: "Please give the pencil to _____ .",
    a: ["her", "she", "hers", "Mary's"],
    c: 0,
    r: "to 是介系詞，後面需接受格代名詞 her（她）。"
  },
  {
    q: "This is my mother. She is a _____ . (請依課本不規則複數變化選出正確單字)",
    a: ["woman", "women", "womans", "womane"],
    c: 0,
    r: "my mother 是單數，因此需使用 woman（單數）。Women 是複數。"
  },
  {
    q: "A: Who is that man? B: He is _____ new teacher.",
    a: ["we", "us", "our", "ours"],
    c: 2,
    r: "He is our new teacher（他是我們的新老師），our 為所有格代名詞。"
  },
  {
    q: "Are those yellow cats? (改為肯定簡答)",
    a: ["Yes, those are.", "Yes, they are.", "Yes, it is.", "No, they are not."],
    c: 1,
    r: "Are those... 的肯定簡答為 Yes, they are。"},

  // --- 句型與語法 (U4: 'be' verb, Wh- questions) ---
  {
    q: "I _____ a good student.",
    a: ["is", "am", "are", "be"],
    c: 1,
    r: "主詞 I 搭配的 be 動詞為 am。"
  },
  {
    q: "Mr. Lin and Miss Wang _____ my parents.",
    a: ["is", "am", "are", "be"],
    c: 2,
    r: "主詞是 Mr. Lin and Miss Wang（複數），搭配的 be 動詞為 are。"},
  {
    q: "A: Is the cat big? B: No, _____ .",
    a: ["it is not", "it isn't", "it is", "both A and B"],
    c: 3,
    r: "否定簡答 It is not 和 It isn't 皆正確，故選 both A and B。"
  },
  {
    q: "They are not happy. (改為疑問句)",
    a: ["Are they happy?", "Is they happy?", "They are happy?", "What are they?"],
    c: 0,
    r: "將 be 動詞 Are 移至句首，成為 Are they happy?"
  },
  {
    q: "A: Who are they? B: They are _____ .",
    a: ["I", "us", "him", "my friends"],
    c: 3,
    r: "Who 詢問身份，答句需說明身份，故選 my friends。"
  },
  {
    q: "A: What is that? B: _____ a new computer.",
    a: ["It's", "That is", "It", "Both A and B"],
    c: 3,
    r: "That is a new computer 和 It's a new computer 皆是完整的回答方式，故選 Both A and B。"
  },
  {
    q: "He is my brother. (改為否定句)",
    a: ["He is not my brother.", "He no is my brother.", "Not he is my brother.", "He isn't."],
    c: 0,
    r: "否定句是在 be 動詞 is 後面加 not。"
  },
  {
    q: "We are from Taiwan. (將 We 改為 My sister and I)",
    a: ["My sister and I am from Taiwan.", "My sister and I is from Taiwan.", "My sister and I are from Taiwan.", "My sister and I be from Taiwan."],
    c: 2,
    r: "My sister and I 等同於 We（複數主詞），故 be 動詞使用 are。"
  },
  {
    q: "A: _____ is your name? B: My name is Linda.",
    a: ["Who", "Where", "How", "What"],
    c: 3,
    r: "詢問名字使用 What is your name?。"
  },
  {
    q: "The yellow dogs are very big. (將 dogs 改為 dog)",
    a: ["The yellow dog is very big.", "The yellow dogs is very big.", "The yellow dog are very big.", "The yellow dog am very big."],
    c: 0,
    r: "主詞 dog 變為單數，be 動詞須從 are 改為 is。"
  },
  {
    q: "Are the girls happy? (改為否定詳答)",
    a: ["No, they aren't.", "No, they are not happy.", "No, the girls is not happy.", "Both A and B."],
    c: 1,
    r: "否定詳答需寫出完整句子 No, they are not happy。"},
  {
    q: "A: Who is he? B: _____.",
    a: ["He is old.", "He is tall.", "He is my father.", "He is here."],
    c: 2,
    r: "Who 詢問身份，只有 He is my father. 是回答身份。"},
  {
    q: "These are yellow books. (用 That 改寫句子)",
    a: ["That is yellow books.", "That is a yellow book.", "Those are yellow books.", "That are yellow books."],
    c: 1,
    r: "That 是單數指示代名詞，故 be 動詞為 is，後接單數名詞 a yellow book。"},

  // --- 字彙測驗 (U3/U4/R2 基礎詞彙) ---
  {
    q: "我媽媽的兄弟是我的什麼？ (My mother's brother is my _____.)",
    a: ["sister", "father", "uncle", "aunt"],
    c: 2,
    r: "媽媽的兄弟是舅舅，英文為 uncle。"
  },
  {
    q: "我的叔叔/伯伯的妻子是我的什麼？ (My uncle's wife is my _____.)",
    a: ["sister", "cousin", "grandfather", "aunt"],
    c: 3,
    r: "叔叔的妻子是嬸嬸，英文為 aunt。"
  },
  {
    q: "請選出與 'grandmother' 性別不同的一組：",
    a: ["mother, aunt", "sister, woman", "father, brother", "girl, wife"],
    c: 2,
    r: "grandmother 是女性。只有 father, brother 是男性。"},
  {
    q: "你喜歡紅色嗎？ (Do you like _____?)",
    a: ["blue", "purple", "red", "green"],
    c: 2,
    r: "Red 是紅色。"
  },
  {
    q: "下列哪個單字是可數名詞的複數形？",
    a: ["apple", "water", "mice", "tea"],
    c: 2,
    r: "mice（老鼠們）是 mouse 的不規則複數形。"},
  {
    q: "我們在學校使用什麼來擦拭錯誤？ (We use an _____ to fix mistakes at school.)",
    a: ["pencil", "book", "eraser", "ruler"],
    c: 2,
    r: "eraser（橡皮擦）用來擦拭錯誤。"},
  {
    q: "在課堂上，老師用什麼來寫字？ (The teacher uses a _____ to write on the board.)",
    a: ["door", "window", "desk", "chalk"],
    c: 3,
    r: "chalk（粉筆）用來在黑板上寫字。"},
  {
    q: "請問 'boxes' 是哪個單字的複數？",
    a: ["bus", "box", "brush", "class"],
    c: 1,
    r: "boxes 是 box 的複數形。"
  },
  {
    q: "請問 'women' 是哪個單字的複數？",
    a: ["man", "woman", "womans", "wumen"],
    c: 1,
    r: "women 是 woman（女人）的不規則複數形。"
  },
  {
    q: "My sister has two _____ at home. (填入 family 的複數)",
    a: ["family", "familys", "families", "family's"],
    c: 2,
    r: "family 的複數是 families。"
  },
  {
    q: "A: Is your shirt clean? B: Yes, it is. It's a _____ shirt.",
    a: ["dirty", "new", "old", "yellow"],
    c: 1,
    r: "答句是肯定的，所以形容詞應該是正面的，且符合文意（例如：新的）。"
  },
  {
    q: "A: _____ is that girl? B: She is my friend, Lily.",
    a: ["What", "Where", "Who", "How"],
    c: 2,
    r: "詢問人物身份，使用 Who。"
  },

  // --- 課文理解與對話 (U3/U4/R2 內容理解) ---
  {
    q: "根據 U3 課文對話，下列何者通常是用來詢問某個物體的所屬權？",
    a: ["What is this?", "Who is that?", "Is this your book?", "Are you happy?"],
    c: 2,
    r: "Is this your book? 使用所有格 your 來詢問物品是否屬於對方。"
  },
  {
    q: "根據 U4 課文內容，下列哪個句子通常是用來介紹家庭成員？",
    a: ["She is a doctor.", "What is that?", "He is my uncle.", "Are you happy?"],
    c: 2,
    r: "He is my uncle. 是典型的介紹句型，介紹家庭成員。"
  },
  {
    q: "A: Look! Those are three mice! B: Oh, my! Where are the other two _____?",
    a: ["mice", "mouse", "mices", "mouse's"],
    c: 0,
    r: "mice 本身就是複數，故 other two 後面仍使用 mice。"
  },
  {
    q: "A: Is this your blue eraser? B: No, it is not. My eraser is _____ .",
    a: ["blue", "yellow", "my", "your"],
    c: 1,
    r: "如果不是藍色的橡皮擦，則可能是其他顏色，例如 yellow。"},
  {
    q: "下列哪個句子是正確的？",
    a: ["She am fine.", "We is happy.", "You are a teacher.", "They is old."],
    c: 2,
    r: "主詞 You 搭配的 be 動詞是 are，故 You are a teacher. 正確。"
  },
  {
    q: "A: Are you a student? B: Yes, _____ .",
    a: ["I am.", "you are.", "I is.", "you am."],
    c: 0,
    r: "問句 Are you... 回答為 Yes, I am。"
  },
  {
    q: "The two _____ are good friends. (填入 'man' 的複數)",
    a: ["man", "mans", "mens", "men"],
    c: 3,
    r: "man 的不規則複數形是 men。"
  },
  {
    q: "A: What is your mother's name? B: _____ name is Judy.",
    a: ["She", "Her", "He", "His"],
    c: 1,
    r: "詢問 mother 的名字，答句需使用 Her（她的）來修飾 name。"
  },
  {
    q: "下列何者最不可能出現在 U3/U4 的課文對話中？",
    a: ["Hello, I'm Mike.", "Is this your bag?", "How much is the pencil?", "I want to go shopping."],
    c: 3,
    r: "U3/U4 主要是基礎 be 動詞與介紹物品，I want to go shopping 句型較難，通常在 U5 或 U6 才出現。"},
  {
    q: "A: Where are you from? B: _____ .",
    a: ["I am a teacher.", "I am from Taiwan.", "My name is John.", "It is a box."],
    c: 1,
    r: "Where are you from? 詢問來自哪裡，答句應為 I am from Taiwan。"},
  {
    q: "A: How are you? B: I'm _____.",
    a: ["fine", "old", "a boy", "here"],
    c: 0,
    r: "How are you? 詢問狀態，I'm fine（我很好）最為合適。"},
  {
    q: "A: Is Mr. Lin our new teacher? B: Yes, _____ is.",
    a: ["he", "she", "it", "they"],
    c: 0,
    r: "Mr. Lin 是男性單數，代名詞使用 he。"},
  {
    q: "下列哪個單字的複數形是錯的？",
    a: ["a day → two days", "a party → two partys", "a box → two boxes", "a wife → two wives"],
    c: 1,
    r: "party 的複數是 parties（去 y 加 ies）。"}
                
                
            ],
            history: [
                // --- 基礎認知與地理位置 (1-10) ---
                {q: "17世紀上半葉，稱霸台灣南部的是哪一國？", a: ["葡萄牙", "西班牙", "荷蘭", "英國"], c: 2, r: "荷蘭人於1624年進入大員（今台南），建立統治中心。"},
                {q: "17世紀上半葉，佔領台灣北部的是哪一國？", a: ["葡萄牙", "西班牙", "荷蘭", "日本"], c: 1, r: "西班牙人於1626年佔領台灣北部雞籠、淡水。"},
                {q: "荷蘭人在大員（今台南安平）建立的城堡是？", a: ["熱蘭遮城", "普羅民遮城", "聖薩爾瓦多城", "聖多明哥城"], c: 0, r: "熱蘭遮城是荷蘭人的統治中樞，位於大員。"},
                {q: "荷蘭人在赤崁（今台南市區）建立的行政中心是？", a: ["熱蘭遮城", "普羅民遮城", "聖薩爾瓦多城", "紅毛城"], c: 1, r: "普羅民遮城主要是商業與行政中心，位置在赤崁。"},
                {q: "西班牙人在雞籠（今基隆和平島）建立的城堡是？", a: ["熱蘭遮城", "普羅民遮城", "聖薩爾瓦多城", "聖多明哥城"], c: 2, r: "聖薩爾瓦多城位於雞籠，是西班牙在北台灣的據點。"},
                {q: "「紅毛城」的前身是西班牙人建立的哪座城？", a: ["聖薩爾瓦多城", "聖多明哥城", "熱蘭遮城", "普羅民遮城"], c: 1, r: "淡水的聖多明哥城後來被荷蘭人重建，俗稱紅毛城。"},
                {q: "荷蘭聯合東印度公司(VOC)的亞洲總部設在哪裡？", a: ["台灣大員", "日本長崎", "印尼巴達維亞", "菲律賓馬尼拉"], c: 2, r: "巴達維亞（今雅加達）是VOC的亞洲總部，台灣歸其管轄。"},
                {q: "西班牙統治台灣時，主要將台灣作為與哪國貿易的跳板？", a: ["中國、日本", "印尼、越南", "印度、波斯", "美國、加拿大"], c: 0, r: "西班牙意圖透過台灣跟中國（明朝）和日本進行貿易。"},
                {q: "荷蘭人佔領台灣之前，曾短暫佔領哪裡被明朝驅逐？", a: ["金門", "馬祖", "澎湖", "琉球"], c: 2, r: "荷蘭人原佔領澎湖，後經沈有容交涉，轉而佔領台灣。"},
                {q: "「大航海時代」最早經過台灣並稱之為Formosa的是？", a: ["西班牙人", "葡萄牙人", "荷蘭人", "英國人"], c: 1, r: "葡萄牙船員經過台灣海峽時讚嘆「Ilha Formosa」（美麗之島）。"},

                // --- 經濟活動與貿易 (11-20) ---
                {q: "荷治時期，台灣出口到「日本」的最大宗商品是？", a: ["蔗糖", "鹿皮", "稻米", "硫磺"], c: 1, r: "鹿皮主要出口日本，用來製作武士戰甲的內襯等。"},
                {q: "荷治時期，台灣出口到「波斯、歐洲」的主要商品是？", a: ["鹿皮", "蔗糖", "茶葉", "樟腦"], c: 1, r: "台灣生產的蔗糖被運往波斯（伊朗）和歐洲販售。"},
                {q: "西班牙佔領北台灣時期，主要輸出的資源是？", a: ["黃金", "硫磺", "石油", "棉花"], c: 1, r: "北台灣（陽明山一帶）盛產硫磺，是西班牙人重要的貿易商品。"},
                {q: "荷蘭人為了增加糧食與蔗糖產量，引進了什麼？", a: ["水牛", "黃牛", "馬", "羊"], c: 1, r: "荷蘭人引進黃牛進行耕作，提升農業效率。"},
                {q: "荷治時期，土地屬於荷蘭國王所有，稱為？", a: ["王田", "官田", "私田", "屯田"], c: 0, r: "荷蘭當局將土地視為王田，招募漢人耕種並收取租稅。"},
                {q: "荷蘭人招募漢人來台開墾，主要的勞力來源是？", a: ["廣東沿海", "福建沿海", "長江流域", "山東半島"], c: 1, r: "主要招募福建沿海（閩南人）的漢人來台。"},
                {q: "荷治時期，漢人若要捕獵鹿隻，必須申請什麼？", a: ["良民證", "捕鹿執照", "身分證", "通關條"], c: 1, r: "為了管理資源與稅收，捕鹿需購買執照（贌社制度的一環）。"},
                {q: "所謂的「三角貿易」中，荷蘭人將什麼運到台灣交換貨物？", a: ["中國生絲", "日本白銀", "東南亞香料", "歐洲槍砲"], c: 1, r: "通常用日本的白銀來台灣購買中國的生絲、瓷器或台灣的鹿皮糖產。"},
                {q: "荷治時期台灣的貨幣制度主要流通什麼？", a: ["宋錢", "貝幣", "西班牙/荷蘭銀元", "日圓"], c: 2, r: "國際貿易通用銀元，如西班牙里爾或荷蘭盾。"},
                {q: "關於荷治時期的經濟，下列敘述何者錯誤？", a: ["台灣是轉運站", "漢人是主要農業勞力", "大力推廣茶葉種植", "屬於商業性殖民"], c: 2, r: "茶葉的大規模商業種植是在清末開港通商後，非荷治時期重點。"},

  // --- 原住民政策與關係 (21-30) ---
                {q: "荷蘭人透過什麼會議來維持對原住民的統治？", a: ["地方會議(歸順儀式)", "長老教會", "部落結盟", "國會"], c: 0, r: "荷蘭人定期舉辦「地方會議」（Landdag），邀集部落長老宣示效忠。"},
                {q: "在地方會議中，荷蘭長官會授予長老什麼作為權力象徵？", a: ["寶劍", "藤杖", "皇冠", "金牌"], c: 1, r: "授予刻有VOC標誌的藤杖，象徵長老的權威來自荷蘭官方。"},
                {q: "荷蘭傳教士主要在台灣傳播哪一教派？", a: ["天主教", "基督教(新教)", "伊斯蘭教", "佛教"], c: 1, r: "荷蘭人信仰基督教新教（加爾文教派）。"},
                {q: "為了傳教，荷蘭傳教士用羅馬拼音紀錄了哪種語言？", a: ["排灣語", "泰雅語", "西拉雅語", "阿美語"], c: 2, r: "創立「新港文書」，紀錄台南附近的西拉雅語。"},
                {q: "「新港文書」在荷蘭人離開後，一直使用到何時？", a: ["明鄭時期", "清朝中葉", "日治時期", "戰後"], c: 1, r: "一直使用到清朝嘉慶年間，又稱「番仔契」。"},
                {q: "第一位來台的荷蘭傳教士是？", a: ["馬偕", "馬雅各", "甘為霖", "干治士"], c: 3, r: "干治士(Candidius)是首位，日月潭即以他命名(Candidius Lake)。"},
                {q: "西班牙人在北台灣主要傳播哪一教派？", a: ["天主教", "基督教(新教)", "東正教", "道教"], c: 0, r: "西班牙是天主教國家。"},
                {q: "哪一個事件顯示荷蘭人對原住民的反抗採取強力鎮壓？", a: ["麻豆社事件", "霧社事件", "牡丹社事件", "大甲西社事件"], c: 0, r: "荷蘭人曾藉由麻豆社事件殺雞儆猴，確立權威。"},
                {q: "荷蘭人曾在屏東小琉球發生過什麼悲劇？", a: ["種族屠殺(拉美島事件)", "瘟疫流行", "海嘯吞沒", "建立大學"], c: 0, r: "荷蘭人曾對小琉球原住民進行滅絕性的攻擊與流放。"},
                {q: "關於荷西時期原住民學校，下列何者正確？", a: ["只收漢人", "教導四書五經", "教授荷蘭語/宗教", "目的是訓練軍隊"], c: 2, r: "設立學校主要是為了傳教，教授教義與拼音文字。"},

  // --- 漢人與外來者關係 (31-40) ---
                {q: "荷治時期爆發最大的漢人反抗事件是？", a: ["林爽文事件", "朱一貴事件", "郭懷一事件", "戴潮春事件"], c: 2, r: "1652年爆發郭懷一事件，是荷治時期規模最大的漢人起義。"},
                {q: "郭懷一事件的爆發原因主要是？", a: ["宗教迫害", "沈重稅賦與壓迫", "強迫剪髮", "禁止回鄉"], c: 1, r: "因不滿荷蘭人的沈重稅收與士兵勒索而起義。"},
                {q: "在郭懷一事件中，荷蘭人聯合了誰來鎮壓漢人？", a: ["西班牙人", "日本人", "原住民", "明朝軍隊"], c: 2, r: "荷蘭人動員西拉雅族原住民協助鎮壓漢人。"},
                {q: "荷蘭人對漢人徵收的人頭稅，當時稱為？", a: ["什一稅", "結首制", "贌社", "人頭稅(結稅)"], c: 3, r: "滿七歲以上的漢人需繳納人頭稅。"},
                {q: "「贌社制度」是將什麼權利拍賣給漢人商人？", a: ["土地所有權", "部落交易壟斷權", "傳教權", "鑄幣權"], c: 1, r: "「贌社」指漢人承包商標下與特定原住民部落交易、收稅的獨佔權。"},
                {q: "當時漢人來台的主要身分多為？", a: ["官員", "軍人", "農民與漁工", "傳教士"], c: 2, r: "多為被招募來耕種王田的農民或捕魚者。"},
                {q: "哪位歷史人物曾擔任荷蘭通譯，後來成為大海商？", a: ["顏思齊", "鄭芝龍", "鄭成功", "施琅"], c: 1, r: "鄭芝龍（鄭成功之父）早年曾任荷蘭人通譯。"},
                {q: "荷蘭統治下，漢人與原住民的關係如何？", a: ["完全隔離", "透過贌商進行交易", "漢人統治原住民", "原住民奴役漢人"], c: 1, r: "漢人贌商作為中間人，進入部落交易，但常發生欺壓糾紛。"},
                {q: "荷蘭人禁止漢人私藏什麼，引發不滿？", a: ["稻米", "武器", "書籍", "衣服"], c: 1, r: "嚴禁漢人持有武器，也是郭懷一事件用農具起義的原因。"},
                 {q: "西班牙人在北台灣對漢人的態度偏向？", a: ["完全驅逐", "限制活動並傳教", "鼓勵通婚", "任命為官"], c: 1, r: "西班牙人同樣利用漢人勞力，但也嚴格控管並積極傳教。"},

  // --- 歷史變遷與比較 (41-50) ---
                {q: "1642年，哪一國軍隊北上將西班牙人逐出台灣？", a: ["明朝", "葡萄牙", "荷蘭", "英國"], c: 2, r: "荷蘭人希望能獨佔台灣貿易利益，進攻雞籠趕走西班牙人。"},
                   {q: "結束荷蘭在台灣38年統治的人是？", a: ["康熙皇帝", "鄭芝龍", "鄭成功", "施琅"], c: 2, r: "鄭成功於1661年攻台，1662年荷蘭投降離開。"},
                {q: "荷蘭與西班牙在台灣的統治共同點不包含？", a: ["皆傳播宗教", "皆發展貿易", "皆建立城堡", "皆實施科舉"], c: 3, r: "科舉制度是中國傳統，荷西時期並無此制度。"},
                {q: "為何西班牙人後來減少對台灣的經營？", a: ["菲律賓發生動亂", "日本鎖國貿易受阻", "經濟效益不如預期", "以上皆是"], c: 3, r: "因日本鎖國導致貿易受挫，加上菲律賓局勢不穩，削減駐軍。"},
                {q: "荷蘭駐台最後一任長官是？", a: ["揆一", "努易茲", "利瑪竇", "哥倫布"], c: 0, r: "揆一(Coyett)是向鄭成功投降的末代長官。"},
                {q: "從哪一件事可以看出台灣在全球貿易體系的角色？", a: ["新港文書的使用", "中國生絲經台轉售全球", "原住民的狩獵", "漢人的水稻耕作"], c: 1, r: "台灣作為轉運站，將中國生絲銷往日本或歐洲，連結全球市場。"},
                {q: "今日台灣何處可見西班牙人留下的遺跡或影響？", a: ["台南赤崁樓", "淡水紅毛城(基座)", "高雄左營", "彰化鹿港"], c: 1, r: "淡水紅毛城最早為西班牙聖多明哥城，雖經重建但位址相同。"},
                {q: "關於「大航海時代」對台灣的影響，最深遠的是？", a: ["確立儒家文化", "使台灣進入世界歷史舞台", "建立民主制度", "普及工業革命"], c: 1, r: "台灣從此被納入世界貿易體系，亦開始有文字紀錄（歷史時代）。"},
                {q: "比較荷蘭與西班牙對原住民的傳教方式？", a: ["荷蘭用武力，西班牙用利誘", "荷蘭創拼音字，西班牙無", "西班牙創拼音字，荷蘭無", "兩者皆禁止傳教"], c: 1, r: "荷蘭人創立新港文書，在教育與傳教上留下具體文字紀錄。"},
                {q: "如果時光回到1650年的台灣，最可能看到的景象是？", a: ["原住民在讀四書五經", "漢人排隊考科舉", "荷蘭船隻載運鹿皮出港", "鐵路火車運送甘蔗"], c: 2, r: "1650年為荷治盛期，鹿皮貿易繁榮，尚無鐵路或科舉。"},
                {q:"舊石器文化？",a:["長濱","大坌坑","圓山","十三行"],c:0,r:"長濱。"},
                {q:"新石器特徵？",a:["農業/陶器","用火","煉鐵","文字"],c:0,r:"農業。"},
                {q:"十三行文化？",a:["金屬器","舊石器","新石器","現代"],c:0,r:"金屬器。"},
                {q:"荷蘭據點？",a:["熱蘭遮城","聖薩爾瓦多城","紅毛城","台北城"],c:0,r:"熱蘭遮城。"},
                {q:"西班牙據點？",a:["北部","南部","東部","中部"],c:0,r:"北部。"},
                {q:"郭懷一反抗？",a:["荷蘭","西班牙","鄭成功","清朝"],c:0,r:"荷蘭。"},
                {q:"荷蘭輸出？",a:["蔗糖/鹿皮","茶葉","樟腦","鴉片"],c:0,r:"蔗糖/鹿皮。"},
                {q:"聖薩爾瓦多城？",a:["基隆","淡水","台南","高雄"],c:0,r:"基隆。"},
                {q:"荷蘭引進？",a:["黃牛","水牛","馬","羊"],c:0,r:"黃牛。"},
                {q:"普羅民遮城？",a:["赤崁樓","安平古堡","紅毛城","億載金城"],c:0,r:"赤崁樓。"},
                {q:"西班牙被誰趕？",a:["荷蘭","鄭成功","原住民","日本人"],c:0,r:"荷蘭。"},
                {q:"王田？",a:["荷蘭官方地","原住民地","鄭氏地","漢人地"],c:0,r:"荷蘭所有。"},
                {q:"大坌坑特徵？",a:["繩紋陶","彩陶","黑陶","幾何印紋"],c:0,r:"繩紋陶。"},
                {q:"圓山發現？",a:["貝塚","石板棺","煉鐵爐","玉器"],c:0,r:"貝塚。"},
                {q:"西班牙傳教？",a:["天主教","基督教","佛教","伊斯蘭教"],c:0,r:"天主教。"},
                {q:"荷蘭文字？",a:["新港文","漢字","英文","日文"],c:0,r:"新港文。"},
                {q:"贌社制度？",a:["承包交易","公行","自由貿易","以物易物"],c:0,r:"承包交易。"},
                {q:"母系社會？",a:["阿美","排灣","布農","鄒族"],c:0,r:"阿美。"},
                {q:"卑南文化？",a:["石板棺","貝塚","鐵渣","幾何陶"],c:0,r:"石板棺。"},
                {q:"荷蘭統治？",a:["地方會議","武力鎮壓","放任","同化"],c:0,r:"地方會議。"},
                {q:"舊石器時代特徵？",a:["打製石器","磨製石器","煉鐵","燒陶"],c:0,r:"打製石器。"},
                {q:"十三行遺址位置？",a:["八里","淡水","基隆","台南"],c:0,r:"八里。"},
                {q:"大坌坑屬於新石器？",a:["早期","中期","晚期","末期"],c:0,r:"早期。"},
                {q:"荷蘭人主要貿易品？",a:["香料","絲綢","白銀","以上皆是"],c:3,r:"以上皆是。"},
                {q:"聖多明哥城位於？",a:["淡水","基隆","台南","高雄"],c:0,r:"淡水。"},
                {q:"已知用火的文化？",a:["長濱","圓山","卑南","十三行"],c:0,r:"長濱。"},
                {q:"平埔族多為？",a:["母系","父系","雙系","不一定"],c:0,r:"母系(如西拉雅)。"},
                {q:"高山族多為？",a:["父系","母系","雙系","不一定"],c:0,r:"父系(如泰雅/布農)。"},
                {q:"台灣信史開始？",a:["荷西時期","鄭氏","清朝","日治"],c:0,r:"荷西時期。"},
                {q:"歐洲人來台目的？",a:["貿易傳教","觀光","探險","移民"],c:0,r:"貿易與傳教。"}
            ],
            geography: [
                {q:"面積最大地形？",a:["山地","平原","丘陵","台地"],c:0,r:"山地。"},
                {q:"北回歸線經過？",a:["嘉義","台北","台中","屏東"],c:0,r:"嘉義。"},
                {q:"板塊交界？",a:["歐亞/菲律賓海","歐亞/太平洋","太平洋/菲律賓海","歐亞/印度洋"],c:0,r:"歐亞/菲律賓海。"},
                {q:"中央山脈？",a:["分水嶺","阻擋颱風","火山","最高"],c:0,r:"分水嶺。"},
                {q:"最長河川？",a:["濁水溪","高屏溪","淡水河","曾文溪"],c:0,r:"濁水溪。"},
                {q:"流域最大？",a:["高屏溪","淡水河","濁水溪","大甲溪"],c:0,r:"高屏溪。"},
                {q:"流量最穩？",a:["淡水河","濁水溪","高屏溪","秀姑巒溪"],c:0,r:"淡水河。"},
                {q:"河川特色？",a:["坡陡流急","長而平緩","含沙少","流量穩"],c:0,r:"坡陡流急。"},
                {q:"北部海岸？",a:["岬灣","沙岸","珊瑚礁","斷層"],c:0,r:"岬灣。"},
                {q:"西部海岸？",a:["沙岸","水深","岩石","斷層"],c:0,r:"沙岸。"},
                {q:"東部海岸？",a:["斷層","曲折","寬廣","珊瑚礁"],c:0,r:"斷層。"},
                {q:"南部海岸？",a:["珊瑚礁","沙岸","岩岸","斷層"],c:0,r:"珊瑚礁。"},
                {q:"夏季季風？",a:["西南","東北","西北","東南"],c:0,r:"西南。"},
                {q:"冬季季風？",a:["東北","西南","西北","東南"],c:0,r:"東北。"},
                {q:"梅雨季節？",a:["5-6月","3-4月","7-8月","9-10月"],c:0,r:"5-6月。"},
                {q:"冬季台北多雨？",a:["東北季風","地形雨","對流雨","颱風"],c:0,r:"東北季風。"},
                {q:"嘉南平原？",a:["河流沖積","火山","風力","板塊"],c:0,r:"河流沖積。"},
                {q:"台北盆地？",a:["斷層陷落","隕石","火山","侵蝕"],c:0,r:"斷層陷落。"},
                {q:"最高山？",a:["玉山","雪山","中央","阿里"],c:0,r:"玉山。"},{q:"養殖漁業？",a:["西部","東部","北部","南部"],c:0,r:"西部。"},
                {q:"台地特徵？",a:["頂部平坦","地勢低窪","起伏大","靠海"],c:0,r:"頂部平坦。"},
                {q:"盆地特徵？",a:["四周高","四周低","平坦","靠海"],c:0,r:"四周高中間低。"},
                {q:"荒溪型河川？",a:["流量變化大","流量穩","長","乾淨"],c:0,r:"流量變化大。"},
                {q:"寒害季節？",a:["冬季","夏季","春季","秋季"],c:0,r:"冬季。"},
                {q:"颱風季節？",a:["夏秋","冬","春","全"],c:0,r:"夏秋。"},
                {q:"沙洲潟湖？",a:["西部","東部","北部","南部"],c:0,r:"西部。"},
                {q:"水庫功能？",a:["調節水資源","發電","觀光","以上皆是"],c:3,r:"以上皆是。"},
                {q:"珊瑚礁條件？",a:["熱帶淺海","寒帶深海","河口","湖泊"],c:0,r:"熱帶淺海。"},
                {q:"岬灣成因？",a:["岩層軟硬","河流","風力","火山"],c:0,r:"岩層軟硬差異侵蝕。"},
                {q:"斷層海岸？",a:["花東","雲嘉","桃竹","恆春"],c:0,r:"花東。"},
                {
    q: "台灣島的地形形成主要受到哪兩個板塊擠壓影響？",
    a: ["歐亞板塊、太平洋板塊", "歐亞板塊、菲律賓海板塊", "印澳板塊、太平洋板塊", "美洲板塊、菲律賓海板塊"],
    c: 1,
    r: "台灣位於歐亞板塊與菲律賓海板塊的交界處，受擠壓而隆起。"
  },
  {
    q: "台灣本島地形中，面積占比最大的是哪一種？",
    a: ["平原", "丘陵", "山地", "台地"],
    c: 2,
    r: "台灣山地面積廣大，約占全島面積的三分之二。"
  },
  {
    q: "下列哪一座山脈被稱為台灣的「脊樑」，且是台灣最長的山脈？",
    a: ["玉山山脈", "雪山山脈", "中央山脈", "阿里山山脈"],
    c: 2,
    r: "中央山脈縱貫台灣南北，有台灣屋脊之稱。"
  },
  {
    q: "台灣最高的山峰「玉山」主峰位於哪一座山脈？",
    a: ["玉山山脈", "中央山脈", "雪山山脈", "海岸山脈"],
    c: 0,
    r: "玉山主峰位於玉山山脈，而非中央山脈。"
  },
  {
    q: "位於台灣最東側，緊鄰太平洋的山脈是？",
    a: ["中央山脈", "雪山山脈", "海岸山脈", "阿里山山脈"],
    c: 2,
    r: "海岸山脈位於花東縱谷東側，緊鄰太平洋。"
  },
  {
    q: "介於中央山脈與海岸山脈之間的狹長谷地是？",
    a: ["屏東平原", "蘭陽平原", "花東縱谷", "嘉南平原"],
    c: 2,
    r: "花東縱谷位於兩大山脈之間，是板塊縫合帶。"
  },
  {
    q: "台灣最大的平原，且是主要農業區的是？",
    a: ["蘭陽平原", "屏東平原", "嘉南平原", "關渡平原"],
    c: 2,
    r: "嘉南平原位於台灣西南部，面積最大。"
  },
  {
    q: "台北盆地的形成原因主要是？",
    a: ["隕石撞擊", "斷層陷落", "火山爆發", "冰河侵蝕"],
    c: 1,
    r: "台北盆地是由斷層陷落後，再經河川堆積而成。"
  },
  {
    q: "下列何者**不是**盆地地形？",
    a: ["台北", "台中", "埔里", "桃園"],
    c: 3,
    r: "桃園主要為「台地」地形（桃園台地）。"
  },
  {
    q: "地形平坦，頂部平坦，邊緣陡峭，地勢稍高於平原的是？",
    a: ["山地", "丘陵", "台地", "盆地"],
    c: 2,
    r: "這是台地地形的定義。"
  },
  {
    q: "苗栗地區的地形主體為何？",
    a: ["平原", "丘陵", "台地", "盆地"],
    c: 1,
    r: "苗栗多丘陵，故有「山城」之稱（苗栗丘陵）。"
  },
  {
    q: "大肚台地與八卦台地均位於台灣哪一區？",
    a: ["北部", "中部", "南部", "東部"],
    c: 1,
    r: "兩者皆位於台灣中部。"
  },
  {
    q: "台灣地形剖面圖呈現什麼特徵？",
    a: ["東西高，中間低", "東邊緩，西邊陡", "西邊緩，東邊陡", "南北高，中間低"],
    c: 2,
    r: "台灣山脈偏東，導致東側坡度陡峭，西側坡度較緩且平原廣大。"
  },
  {
    q: "「月世界」惡地地形主要分布在台灣何處？",
    a: ["北部大屯山", "中部八卦山", "南部高雄、台南交界", "東部海岸山脈"],
    c: 2,
    r: "著名的月世界位於高雄田寮及台南左鎮一帶，屬泥岩惡地。"
  },
  {
    q: "哪種地形通常是人口最密集、經濟最發達的區域？",
    a: ["山地", "平原與盆地", "丘陵", "高山"],
    c: 1,
    r: "平原與盆地地勢平坦，水源充足，適合居住與發展。"
  },

  // --- 海岸地形 (16-30) ---
  {
    q: "台灣西部海岸（從淡水河口到屏東楓港）主要屬於哪種類型？",
    a: ["岩岸", "沙岸", "珊瑚礁海岸", "斷層海岸"],
    c: 1,
    r: "西部河流含沙量大，河流堆積旺盛，形成平直的沙岸。"
  },
  {
    q: "台灣北部海岸（如野柳、鼻頭角）主要屬於哪種類型？",
    a: ["岩岸(岬灣海岸)", "沙岸", "珊瑚礁海岸", "斷層海岸"],
    c: 0,
    r: "北部受東北季風與海浪侵蝕，形成岬角與海灣相間的岩岸。"
  },
  {
    q: "「潟湖」、「沙洲」最常出現在台灣哪一帶海岸？",
    a: ["東北部", "東部", "西南部", "恆春半島"],
    c: 2,
    r: "西南部沿海（如七股）多沙洲與潟湖（內海）。"
  },
  {
    q: "台灣東部海岸（蘇花公路一帶）以何種景觀著稱？",
    a: ["寬廣的沙灘", "曲折的灣澳", "陡峭的斷層懸崖", "廣大的潮間帶"],
    c: 2,
    r: "東部緊鄰深海，受斷層與海蝕影響，形成壯觀的清水斷崖（斷層海岸）。"
  },
  {
    q: "恆春半島（墾丁）沿海主要為何種海岸地形？",
    a: ["岩岸", "沙岸", "珊瑚礁海岸", "斷層海岸"],
    c: 2,
    r: "恆春半島地處熱帶，海水溫暖清澈，發育出珊瑚礁海岸。"
  },
  {
    q: "適合發展「養殖漁業」（如養蚵、文蛤）的是哪種海岸？",
    a: ["北部岩岸", "西部沙岸", "東部斷層海岸", "南部珊瑚礁海岸"],
    c: 1,
    r: "西部沙岸多潟湖與潮間帶，適合從事養殖漁業。"
  },
  {
    q: "適合興建「天然良港」的是哪種海岸類型？",
    a: ["沙岸", "岩岸(岬灣)", "斷層海岸", "珊瑚礁海岸"],
    c: 1,
    r: "岩岸海岸線曲折，水深較深，易形成天然良港（如基隆港、蘇澳港）。"
  },
  {
    q: "「女王頭」是野柳著名的地標，其成因主要是？",
    a: ["河流堆積", "風化與海水侵蝕", "板塊擠壓", "火山活動"],
    c: 1,
    r: "野柳位於北部岩岸，受海蝕與風化作用形成蕈狀岩。"
  },
  {
    q: "台灣西部海岸線的特徵為何？",
    a: ["海岸線曲折，多良港", "海岸線平直，多沙灘", "懸崖峭壁，平地狹窄", "珊瑚礁遍布"],
    c: 1,
    r: "西部主要由河流堆積而成，海岸線平直單調。"
  },
  {
    q: "下列哪一個港口屬於「人工港」？（因西部多沙岸，水淺需人工挖掘）",
    a: ["基隆港", "蘇澳港", "台中港", "花蓮港"],
    c: 2,
    r: "台中港位於西部沙岸，屬於人工挖掘的港口。"
  },
  {
    q: "造成西部海岸「海岸線向外延伸」（海埔新生地）的主要營力是？",
    a: ["海浪侵蝕", "河流堆積", "風力吹送", "地殼下陷"],
    c: 1,
    r: "河流從上游帶來泥沙在河口堆積，使陸地向海延伸。"
  },
  {
    q: "下列何處可以看見壯觀的「海蝕柱」、「海蝕平臺」？",
    a: ["台南七股", "嘉義布袋", "花蓮石梯坪", "彰化王功"],
    c: 2,
    r: "花蓮石梯坪屬東部岩岸（或受抬升的珊瑚礁岩岸特徵），海蝕地形發達。"
  },
  {
    q: "西部沿海常見「外傘頂洲」，其形成的物質主要來自？",
    a: ["火山灰", "珊瑚遺骸", "河流搬運的泥沙", "隕石碎屑"],
    c: 2,
    r: "由濁水溪等河川帶來的泥沙堆積而成。"
  },
  {
    q: "關於台灣海岸的敘述，何者**錯誤**？",
    a: ["東部：斷層海岸，景色壯麗", "南部：珊瑚礁海岸，觀光興盛", "北部：沙岸，適合海水浴場", "西部：多沙洲潟湖，養殖業發達"],
    c: 2,
    r: "北部主要是「岩岸」（岬灣海岸），雖有部分沙灘（如白沙灣），但整體分類屬岩岸特徵；西部才是典型的沙岸。"
  },
  {
    q: "「清水斷崖」位於哪兩地之間？",
    a: ["基隆到宜蘭", "蘇澳到花蓮", "花蓮到台東", "高雄到墾丁"],
    c: 1,
    r: "位於蘇花公路（蘇澳-花蓮）段。"
  },

  // --- 島嶼與離島 (31-40) ---
  {
    q: "澎湖群島的地形景觀主要由什麼構成？",
    a: ["珊瑚礁", "玄武岩(火山熔岩)", "花崗岩", "石灰岩"],
    c: 1,
    r: "澎湖是由火山熔岩（玄武岩）冷卻凝固形成的島嶼，多柱狀節理。"
  },
  {
    q: "下列哪一個離島屬於「珊瑚礁島」？",
    a: ["金門", "馬祖", "小琉球", "蘭嶼"],
    c: 2,
    r: "小琉球是台灣附近唯一的珊瑚礁島。"
  },
  {
    q: "金門與馬祖的地質構造主要屬於？",
    a: ["大陸棚上的珊瑚礁", "大陸島(花崗岩)", "火山島", "沙洲島"],
    c: 1,
    r: "金馬靠近中國大陸，地質為堅硬的花崗岩，屬於大陸島。"
  },
  {
    q: "綠島與蘭嶼的形成原因為何？",
    a: ["珊瑚礁隆起", "海底火山噴發", "大陸板塊斷裂", "河口泥沙堆積"],
    c: 1,
    r: "綠島和蘭嶼皆由海底火山噴發形成的火山島。"
  },
  {
    q: "釣魚台列嶼位於台灣的哪個方向？",
    a: ["東南方", "西南方", "東北方", "西北方"],
    c: 2,
    r: "釣魚台位於台灣東北方海域。"
  },
  {
    q: "南海中的東沙島、太平島屬於哪種類型的島嶼？",
    a: ["火山島", "大陸島", "珊瑚礁島", "沙洲島"],
    c: 2,
    r: "南海諸島多為珊瑚礁島（環礁）。"
  },
  {
    q: "龜山島位於宜蘭外海，其外型像烏龜，屬於何種島嶼？",
    a: ["火山島", "珊瑚礁島", "大陸島", "沖積島"],
    c: 0,
    r: "龜山島是活火山島，有後火山活動（噴氣孔）。"
  },
  {
    q: "下列哪個離島以「雙心石滬」聞名？",
    a: ["綠島", "蘭嶼", "澎湖(七美)", "金門"],
    c: 2,
    r: "雙心石滬位於澎湖七美鄉。"
  },
  {
    q: "蘭嶼的原住民是哪一族？",
    a: ["阿美族", "泰雅族", "達悟族(雅美族)", "排灣族"],
    c: 2,
    r: "達悟族（雅美族）世居蘭嶼，有拼板舟文化。"
  },
  {
    q: "馬祖著名的自然景觀「藍眼淚」通常在什麼季節出現？",
    a: ["春夏季", "秋冬季", "颱風天", "寒流來襲時"],
    c: 0,
    r: "藍眼淚（夜光藻）多發於春夏交替之際。"
  },

  // --- 綜合應用與環境議題 (41-50) ---
  {
    q: "台灣河川具有「長度短、坡度陡、水流急」的特徵，這與什麼有關？",
    a: ["降雨量太少", "島窄山多地勢高", "氣溫太高", "植物太少"],
    c: 1,
    r: "因台灣島狹長且中央山脈地勢高，導致河川短急。"
  },
  {
    q: "台灣西南部沿海地區常發生「地層下陷」，主因為何？",
    a: ["地震頻繁", "超抽地下水", "海平面上升", "土石流"],
    c: 1,
    r: "養殖漁業超抽地下水是主因。"
  },
  {
    q: "下列哪種地形利用方式是**不適當**的？",
    a: ["平原發展農業", "丘陵闢建梯田", "高山開闢高爾夫球場", "盆地發展都市"],
    c: 2,
    r: "高山開發易破壞水土保持，引發土石流。"
  },
  {
    q: "台灣目前有幾座國家公園位於外島？",
    a: ["一座", "兩座", "三座", "四座"],
    c: 1,
    r: "兩座：金門國家公園、澎湖南方四島國家公園。（東沙環礁為國家公園等級，但通常教學上會提到金門與澎湖，若含東沙則為三座，國中教材主要強調金門與澎湖海洋國家公園，近年新增東沙環礁國家公園，視版本而定，但金門與澎湖最常見）。*註：嚴格來說有金門、東沙環礁、澎湖南方四島。若選項無三座，選兩座（早期教材），若有三座選三座。此處以常見的「金門、澎湖」為主，若含東沙為3。更正：東沙環礁國家公園是第7座。澎湖南方四島是第9座。金門是第6座。故共有3座。但許多舊題庫可能只考金門。若依現況是3座。*"
  },
  {
    q: "下列對於台灣地理位置的描述，何者正確？",
    a: ["位於太平洋西側", "位於亞洲大陸東側", "位於板塊交界帶", "以上皆是"],
    c: 3,
    r: "三個敘述皆符合台灣的地理特徵。"
  },
  {
    q: "「濁水溪」流經台灣中部，其出海口呈現什麼地形？",
    a: ["三角洲", "沖積扇", "峽谷", "盆地"],
    c: 0,
    r: "河口泥沙堆積形成三角洲。"
  },
  {
    q: "如果要興建核能發電廠，最**不適合**蓋在下列何處？",
    a: ["岩盤堅硬處", "人口稀少處", "活動斷層帶上", "水源充足處"],
    c: 2,
    r: "斷層帶地質不穩，極易發生危險。"
  },
  {
    q: "台灣「沙洲」與「潟湖」地形近年來逐漸縮減，原因包含？",
    a: ["上游興建水庫攔沙", "海岸設置防波堤", "河川輸沙量減少", "以上皆是"],
    c: 3,
    r: "沙源減少（水庫攔截）與人工設施干擾海流，導致沙洲侵蝕退縮。"
  },
  {
    q: "下列哪一組配對是**錯誤**的？",
    a: ["大屯山群 - 火山地形", "太魯閣 - 峽谷地形", "野柳 - 女王頭", "陽明山 - 惡地地形"],
    c: 3,
    r: "陽明山是火山地形；惡地地形主要在南部月世界。"
  },
  {
    q: "如果你想去觀察「柱狀玄武岩」，應該去哪裡？",
    a: ["墾丁", "太魯閣", "澎湖", "阿里山"],
    c: 2,
    r: "這是澎湖最著名的地質景觀。"
  }
            ],
            civics: [
                {q:"配偶屬於？",a:["配偶","血親","姻親","法定血親"],c:0,r:"配偶。"},
                {q:"岳父屬於？",a:["姻親","血親","配偶","法定血親"],c:0,r:"姻親。"},
                {q:"收養關係？",a:["法定血親","自然血親","姻親","配偶"],c:0,r:"法定血親又稱為擬制血親，但法律上視為自然血親。"},
                {q:"兄弟姊妹？",a:["二親等","一","三","四"],c:0,r:"二親等。"},
                {q:"父母？",a:["一親等","二","三","無"],c:0,r:"一親等。"},
                {q:"夫妻+未婚子女？",a:["小家庭","折衷","大家庭","單親"],c:0,r:"小家庭。"},
                {q:"三代同堂？",a:["折衷","小家庭","大家庭","頂客"],c:0,r:"折衷家庭。"},
                {q:"家暴法保障？",a:["家庭成員","配偶","兒童","老人"],c:0,r:"家庭成員。"},
                {q:"家暴申請？",a:["保護令","搜索票","拘票","罰單"],c:0,r:"保護令。"},
                {q:"性別平權？",a:["家務分工","男主外","從父姓","財產傳子"],c:0,r:"家務分工。"},
                {q:"子女姓氏？",a:["父母約定","父姓","母姓","抽籤"],c:0,r:"父母約定。"},
                {q:"旁系禁婚？",a:["六親等","三親等","五親等","無"],c:0,r:"六親等。"},
                {q:"頂客族？",a:["雙薪無子","單親","三代","隔代"],c:0,r:"雙薪無子。"},
                {q:"提供物資？",a:["經濟","生育","教育","情感"],c:0,r:"經濟功能。"},
                {q:"強制力規範？",a:["法律","道德","風俗","宗教"],c:0,r:"法律。"},
                {q:"讓座？",a:["道德","法律","宗教","流行"],c:0,r:"道德。"},
                {q:"發紅包？",a:["風俗","法律","宗教","道德"],c:0,r:"風俗。"},
                {q:"管委會？",a:["地緣","血緣","業緣","趣緣"],c:0,r:"地緣。"},
                {q:"工會？",a:["業緣","血緣","地緣","趣緣"],c:0,r:"業緣。"},
                {q:"登山社？",a:["趣緣","血緣","地緣","業緣"],c:0,r:"趣緣。"},
                {q:"宗親會？",a:["血緣","地緣","業緣","趣緣"],c:0,r:"血緣。"},
                {q:"法律制定？",a:["立法院","行政院","司法院","總統"],c:0,r:"立法院。"},
                {q:"法律處罰？",a:["最嚴厲","最輕","無","隨意"],c:0,r:"最嚴厲(刑罰)。"},
                {q:"姻親包含？",a:["以上皆是","血親的配偶","配偶的血親","配偶血親的配偶"],c:0,r:"以上皆是。"},
                {q:"家庭功能無？",a:["戰爭","生育","經濟","保護"],c:0,r:"戰爭。"},
                {q:"單親家庭？",a:["父或母一方","祖父母","無子女","三代"],c:0,r:"父或母一方。"},
                {q:"隔代教養？",a:["祖父母照顧","父母照顧","保母照顧","學校照顧"],c:0,r:"祖父母照顧。"},
                {q:"繼承權？",a:["男女平等","男先","女先","長子先"],c:0,r:"男女平等。"},
                {q:"宗教約束？",a:["超自然/教規","法律","輿論","良心"],c:0,r:"超自然/教規。"},
                {q:"志願結社？",a:["自由/公益","強制","營利","官方"],c:0,r:"自由/公益。"},
                // --- 第一部分：社會規範 (風俗、道德、宗教、法律) ---
  {
    q: "端午節吃粽子、划龍舟，清明節掃墓祭祖。這些行為屬於哪一種社會規範？",
    a: ["倫理道德", "風俗習慣", "宗教信仰", "法律"],
    c: 1,
    r: "風俗習慣是歷代相沿、約定俗成的行為模式，如節慶習俗。"
  },
  {
    q: "「舉頭三尺有神明」，這句話主要透過哪種力量來約束人的行為？",
    a: ["法律制裁", "輿論批評", "超自然力量(宗教)", "傳統習慣"],
    c: 2,
    r: "這是宗教信仰的約束力，透過對神鬼的敬畏來勸人向善。"
  },
  {
    q: "關於「倫理道德」的敘述，下列何者正確？",
    a: ["具有強制力", "主要依賴外在制裁", "是判斷善惡的標準", "違反會被判刑"],
    c: 2,
    r: "倫理道德是發自內心的良知，用來判斷是非善惡，無公權力強制。"
  },
  {
    q: "社會規範中，具有「強制力」，且由國家制定並執行的是？",
    a: ["風俗習慣", "倫理道德", "宗教信仰", "法律"],
    c: 3,
    r: "法律是唯一具有國家強制力的社會規範，違反需受處罰。"
  },
  {
    q: "「讓座給老弱婦孺」是發揮哪一種社會規範的功能？",
    a: ["法律", "倫理道德", "宗教信仰", "政治協商"],
    c: 1,
    r: "發揮公德心與同理心，屬於倫理道德的範疇。"
  },
  {
    q: "下列哪一種行為**僅**違反了道德或習慣，但**未**違反法律？",
    a: ["騎機車未戴安全帽", "隨地吐痰", "在公車上大聲喧譁", "酒後駕車"],
    c: 2,
    r: "喧譁是不道德或違反公德的行為，通常不構成犯罪（除非嚴重擾亂秩序）；其他三者皆有法規處罰（如道交條例、廢棄物清理法）。"
  },
  {
    q: "法律常被稱為社會規範的？",
    a: ["最高標準", "唯一標準", "最低標準", "崇高理想"],
    c: 2,
    r: "法律只規定人們「不能做」的事，是維持秩序的最低底線。"
  },
  {
    q: "基督教徒在飯前禱告，這是屬於？",
    a: ["風俗習慣", "宗教信仰", "倫理道德", "法律規定"],
    c: 1,
    r: "透過儀式尋求心靈寄託，屬宗教信仰。"
  },
  {
    q: "小華闖紅燈被警察開單罰款。這是受到哪種力量的制裁？",
    a: ["良心譴責", "社會輿論", "公權力(法律)", "神明懲罰"],
    c: 2,
    r: "警察執行法律，屬於國家公權力的行使。"
  },
  {
    q: "下列關於社會規範的比較，何者正確？",
    a: ["法律的產生最早", "道德主要約束內在良心", "風俗習慣有強制力", "宗教信仰只在現代才出現"],
    c: 1,
    r: "A風俗習慣最早；C法律才有強制力；D宗教自古即有。B正確。"
  },
  {
    q: "過年發紅包、吃年夜飯，這是屬於？",
    a: ["宗教儀式", "風俗習慣", "法律義務", "道德規範"],
    c: 1,
    r: "屬於年節習俗。"
  },
  {
    q: "某人撿到錢包據為己有，他不僅受到良心譴責，還被法辦。這說明了什麼？",
    a: ["社會規範間會互相衝突", "社會規範間可相輔相成", "法律可以取代道德", "道德比法律沒用"],
    c: 1,
    r: "侵占遺失物同時違反道德與法律，顯示兩者可共同維持秩序。"
  },
  {
    q: "第六倫是指現代社會中哪一種關係的倫理？",
    a: ["父子關係", "群己關係", "夫妻關係", "君臣關係"],
    c: 1,
    r: "傳統五倫外，現代社會強調個人與群體（陌生人）的「群己關係」。"
  },
  {
    q: "下列何者屬於「啟動內在制裁」的社會規範？",
    a: ["法律與宗教", "道德與宗教", "法律與風俗", "風俗與道德"],
    c: 1,
    r: "道德靠良心（內在），宗教靠信仰（內在）；法律與風俗多靠外在輿論或處罰。"
  },
  {
    q: "伊斯蘭教徒不吃豬肉，這是受到何種規範的影響？",
    a: ["倫理道德", "法律", "宗教信仰", "流行時尚"],
    c: 2,
    r: "源自《古蘭經》的教義。"
  },

  // --- 第二部分：家庭型態與功能 (16-30) ---
  {
    q: "由「一對夫妻及其未婚子女」組成的家庭，稱為？",
    a: ["大家庭", "折衷家庭", "核心家庭", "單親家庭"],
    c: 2,
    r: "核心家庭（小家庭）是最基本的家庭型態。"
  },
  {
    q: "三代同堂（祖父母、父母、子女）同住的家庭型態是？",
    a: ["核心家庭", "折衷家庭", "聯合家庭", "頂客家庭"],
    c: 1,
    r: "折衷家庭又稱主幹家庭，由直系血親三代組成。"
  },
  {
    q: "小明結婚後，和哥哥一家人以及父母全部住在一起，這屬於？",
    a: ["核心家庭", "折衷家庭", "大家庭(聯合家庭)", "重組家庭"],
    c: 2,
    r: "包含旁系血親（兄弟及其配偶子女）同住，屬於大家庭。"
  },
  {
    q: "「頂客族」(DINK) 家庭的特徵為何？",
    a: ["單親扶養小孩", "三代同堂", "雙薪且不生小孩", "隔代教養"],
    c: 2,
    r: "Double Income, No Kids (雙薪無子)。"
  },
  {
    q: "父母離婚或配偶過世，由一方單獨扶養子女，稱為？",
    a: ["單親家庭", "繼親家庭", "隔代教養家庭", "新住民家庭"],
    c: 0,
    r: "只有父或母一方與未婚子女同住。"
  },
  {
    q: "父母到外地工作，將子女交由祖父母照顧，這形成什麼家庭？",
    a: ["頂客家庭", "重組家庭", "隔代教養家庭", "核心家庭"],
    c: 2,
    r: "由祖父母負擔主要教養責任。"
  },
  {
    q: "家庭提供子女食衣住行，滿足生理需求，是發揮何種功能？",
    a: ["生育功能", "教育功能", "經濟功能", "保護與照顧功能"],
    c: 3,
    r: "提供物質生活保障與身心安全的庇護，屬保護與照顧功能（有些版本歸在經濟或照顧，若選項有經濟與照顧並列，提供物資偏經濟，照顧生活起居偏照顧，此題意指生活起居的照料）。*更正：若強調「滿足生理需求、食衣住行之供給」，通常歸類為「經濟功能」（生產/消費）或「保護與照顧」。但在國中公民中，提供物質多連結到經濟功能(消費)，照顧生活起居連結到保護照顧。若選項分開，選「經濟功能」指提供物資，選「保護照顧」指安全維護。但在現代分類，提供生活必需品常被視為經濟功能的消費面。* **修正：依國中主流教材，提供生活物資屬於「經濟功能」；照顧家人生活起居屬於「保護與照顧」。題目若強調「食衣住行」的供給，選經濟功能較佳；若強調「生病照顧、安全維護」，選保護照顧。此題意指「滿足生理需求(吃飽穿暖)」，傾向經濟功能。但若選項有「保護與照顧」，通常也是正確選項。為免爭議，改為「家庭透過工作賺錢，購買生活所需」-> 經濟功能。本題題幹修正為：父母教導小華做人處事的道理，這是？** -> 教育功能。"
  },
  {
    q: "父母教導孩子基本的生活習慣與禮貌，這是家庭的哪項功能？",
    a: ["生育功能", "教育功能", "經濟功能", "娛樂功能"],
    c: 1,
    r: "家庭是個人社會化的第一個場所，負責基礎教育。"
  },
  {
    q: "現代社會中，許多家庭功能逐漸外移，例如照顧幼兒功能移轉給？",
    a: ["法院", "保母或幼兒園", "警察局", "工廠"],
    c: 1,
    r: "家庭的保護與照顧功能部分外移至專業機構。"
  },
  {
    q: "家庭成員間互相傾訴心事、分享快樂、分擔憂愁，是何種功能？",
    a: ["心理(情感)功能", "生育功能", "經濟功能", "政治功能"],
    c: 0,
    r: "提供情感支持與心理慰藉。"
  },
  {
    q: "「新住民家庭」是指家庭成員中有人來自？",
    a: ["外縣市", "原住民部落", "其他國家(跨國婚姻)", "客家庄"],
    c: 2,
    r: "因跨國婚姻組成的家庭，配偶被稱為新住民。"
  },
  {
    q: "關於現代家庭變遷的敘述，下列何者正確？",
    a: ["出生率越來越高", "家庭平均人口數增加", "離婚率下降", "家庭型態趨向多元"],
    c: 3,
    r: "少子化導致出生率低、人口數少；離婚率高；型態多元（如單親、頂客）。"
  },
  {
    q: "王先生與李小姐結婚，兩人各自帶著前一段婚姻的孩子組成新家庭，這是？",
    a: ["核心家庭", "重組家庭(繼親家庭)", "折衷家庭", "隔代家庭"],
    c: 1,
    r: "由雙方或一方帶入前次婚姻子女組成的家庭。"
  },
  {
    q: "「少子化」現象主要會衝擊家庭的哪一項功能？",
    a: ["生育功能", "娛樂功能", "宗教功能", "政治功能"],
    c: 0,
    r: "少子化直接反映了生育功能的減退。"
  },
  {
    q: "為了因應高齡化社會，家庭功能式微，政府推動什麼政策來協助？",
    a: ["長照2.0", "十二年國教", "全民健保", "垃圾分類"],
    c: 0,
    r: "長期照顧政策是為了協助解決家庭照顧老人功能不足的問題。"
  },

  // --- 第三部分：親屬關係與法律 (31-43) ---
  {
    q: "我國《民法》規定的親屬種類，**不包含**下列何者？",
    a: ["配偶", "血親", "姻親", "鄰居"],
    c: 3,
    r: "親屬包含配偶、血親、姻親三類。配偶是親屬關係的基礎，但無親等之分。"
  },
  {
    q: "「血緣關係」形成的親屬，稱為？",
    a: ["配偶", "自然血親", "法定血親", "姻親"],
    c: 1,
    r: "因生理血緣關係而生的為自然血親。"
  },
  {
    q: "經由「收養」而成立的親屬關係，法律上稱為？",
    a: ["自然血親", "法定血親(擬制血親)", "姻親", "遠房親戚"],
    c: 1,
    r: "無血緣關係但經法律程序收養，視同婚生子女，為法定血親。"
  },
  {
    q: "請問「你和你的父親」在親等上是幾親等？",
    a: ["一親等", "二親等", "三親等", "無親等"],
    c: 0,
    r: "父母與子女為一親等直系血親。"
  },
  {
    q: "請問「你和你的兄弟姊妹」是幾親等？",
    a: ["一親等", "二親等", "三親等", "四親等"],
    c: 1,
    r: "你是第一代，父母是上源，兄弟是另一條分支。算法：你->父母(1)->兄弟(1)，加起來為二親等旁系血親。"
  },
  {
    q: "下列何者屬於「姻親」？",
    a: ["養父母", "堂哥", "大嫂(哥哥的妻子)", "外婆"],
    c: 2,
    r: "因婚姻而產生的親屬關係。養父母是法定血親，堂哥、外婆是血親。"
  },
  {
    q: "「配偶」在法律上的親等是多少？",
    a: ["一親等", "二親等", "零親等(無親等)", "一百分"],
    c: 2,
    r: "配偶是親屬關係的源頭，法律上不計算親等。"
  },
  {
    q: "你和「舅舅」的親屬關係是？",
    a: ["直系血親", "旁系血親", "姻親", "法定血親"],
    c: 1,
    r: "舅舅是媽媽的兄弟，與你出自同源（外公外婆）但非直系，故為旁系血親。"
  },
  {
    q: "依據《民法》，結婚的法定年齡為？（修法後）",
    a: ["男18女16", "男女皆為18歲", "男20女20", "男17女15"],
    c: 1,
    r: "民法修法後，男女結婚與成年年齡皆統一為18歲。"
  },
  {
    q: "關於「繼承權」，下列敘述何者正確？",
    a: ["只有兒子可以繼承", "出嫁的女兒不能繼承", "配偶與子女都有繼承權", "私生子絕對無繼承權"],
    c: 2,
    r: "法律規定配偶與子女（直系血親卑親屬）皆有繼承權，不分男女，非婚生子女經認領後亦有。"
  },
  {
    q: "為了某些優生學理由，法律禁止近親結婚。限制範圍是？",
    a: ["六親等以內", "五親等以內", "三親等以內", "只要同姓就不行"],
    c: 0,
    r: "《民法》禁止旁系血親在六親等以內者結婚（因收養成立之四親等及六親等旁系血親，輩分相同者不在此限，但原則是禁六親等）。"
  },
  {
    q: "如果想終止收養關係，必須透過什麼程序？",
    a: ["登報作廢", "雙方口頭約定", "向法院聲請許可", "里長證明"],
    c: 2,
    r: "收養與終止收養皆須經法院認可/判決。"
  },
  {
    q: "下列親屬稱謂，何者屬於「直系血親」？",
    a: ["伯父", "外祖母", "表妹", "岳父"],
    c: 1,
    r: "生我者或我生者。外祖母（媽媽的媽媽）是直系血親尊親屬。岳父是姻親，伯父表妹是旁系血親。"
  },

  // --- 第四部分：家庭衝突與暴力防治 (44-50) ---
  {
    q: "家庭暴力發生時，受害者可以撥打哪一支專線求助？",
    a: ["119", "110", "113", "165"],
    c: 2,
    r: "113是全國保護專線（婦幼保護專線）。"
  },
  {
    q: "為防治家庭暴力，我國制定了哪一部法律？",
    a: ["刑法", "家庭暴力防治法", "兒童及少年福利法", "社會秩序維護法"],
    c: 1,
    r: "專門針對家庭暴力制定的《家庭暴力防治法》。"
  },
  {
    q: "家庭暴力的範圍包括？",
    a: ["只有身體上的毆打", "只有精神上的謾罵", "身體、精神或經濟上的騷擾與傷害", "只有夫妻之間才算"],
    c: 2,
    r: "家暴法定義廣泛，包含身體、精神、經濟上的不法侵害。"
  },
  {
    q: "被害人可向法院聲請什麼法律文件來禁止加害人靠近或騷擾？",
    a: ["搜索票", "保護令", "拘票", "傳票"],
    c: 1,
    r: "通常保護令、暫時保護令、緊急保護令，統稱「保護令」(Protection Order)。"
  },
  {
    q: "家人之間對於金錢使用觀念不同而產生爭執，這是屬於？",
    a: ["價值觀與生活習慣的衝突", "家務分工的衝突", "經濟權益的衝突", "情感表達的衝突"],
    c: 0,
    r: "金錢觀念屬於價值觀的一部分（也可以解釋為經濟衝突，但國中教材多歸類在價值觀差異）。"
  },
  {
    q: "解決家庭衝突最好的方法是？",
    a: ["冷戰不說話", "離家出走", "理性溝通與同理心", "大聲爭吵比輸贏"],
    c: 2,
    r: "理性溝通、同理對方立場是解決衝突的基礎。"
  },
  {
    q: "《家庭暴力防治法》保護的對象**不包含**下列何者？",
    a: ["現有配偶或前配偶", "同居人", "目睹家暴的兒童", "鄰居吵架"],
    c: 3,
    r: "家暴法保護的是家庭成員（含同居伴侶），鄰居吵架不適用此法（適用社維法或刑法）。"
  }
            ]
        };

        // --- GLOBAL LOGIC ---
        let currentSubject = 'city';
        let quizState = { active: false, questions: [], index: 0, score: 0, hp: 3 };

        document.addEventListener('DOMContentLoaded', () => {
            loadGame();
            renderSidebar();
            updateResourceUI();
            switchView('city');
        });

        function loadGame() { const saved = localStorage.getItem('rimuru_save_v14'); if(saved) Object.assign(gameState, JSON.parse(saved)); }
        function saveGame() { localStorage.setItem('rimuru_save_v14', JSON.stringify(gameState)); updateResourceUI(); }
        function updateResourceUI() {
            document.getElementById('res-magic').innerText = gameState.magicules;
            document.getElementById('res-herb').innerText = gameState.herbs;
            let lvl = 1;
            if(gameState.buildings.castle) lvl = 5; else if(gameState.buildings.arena) lvl = 4; else if(gameState.buildings.school) lvl = 3; else if(gameState.buildings.blacksmith) lvl = 2;
            document.getElementById('res-level').innerText = `Lv.${lvl}`;
        }

        function shareApp() {
            const text = "這是我的「坦派斯特期中考特訓班」APP！包含全科筆記與遊戲化測驗，快來下載 HTML 一起複習！";
            if (navigator.share) {
                navigator.share({ title: '坦派斯特特訓班', text: text }).catch(console.error);
            } else {
                navigator.clipboard.writeText(text).then(() => alert("已複製分享連結！"));
            }
        }

        function renderSidebar() {
            document.getElementById('sidebar-subjects').innerHTML = Object.values(studyData).map(s => `<button onclick="switchView('${s.id}')" id="nav-${s.id}" class="nav-item w-full text-left p-3 rounded-xl flex items-center gap-3 text-slate-500 hover:bg-sky-50 transition-all"><div class="w-6 text-center"><i class="fa-solid fa-${s.icon}"></i></div>${s.title.split(' ')[0]}</button>`).join('');
        }

        function switchView(viewId) {
            currentSubject = viewId;
            document.querySelectorAll('.nav-item').forEach(el => el.className = `nav-item w-full text-left p-3 rounded-xl flex items-center gap-3 text-slate-500 hover:bg-sky-50 transition-all`);
            const btn = document.getElementById(`nav-${viewId}`);
            if(btn) btn.className = `nav-item w-full text-left p-3 rounded-xl flex items-center gap-3 bg-sky-100 text-sky-700 font-bold shadow-sm transition-all`;
            const container = document.getElementById('main-container');
            if(viewId === 'city') renderCity(container); else renderSubject(viewId, container);
        }

        function renderCity(container) {
            container.innerHTML = `
                <div class="max-w-5xl mx-auto space-y-8 animate-fade-in">
                    <div class="glass-panel p-8 rounded-3xl relative overflow-hidden">
                        <div class="absolute top-0 right-0 p-4 opacity-10 text-9xl text-sky-900 rotate-12"><i class="fa-solid fa-crown"></i></div>
                        <h2 class="text-3xl font-black text-slate-800 mb-2">坦派斯特建設日誌</h2>
                        <p class="text-slate-600">透過學習獲得魔素，建設你的魔物聯邦！</p>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                        ${Object.entries(buildingsInfo).map(([key, info]) => {
                            const built = gameState.buildings[key];
                            return `<div class="bg-white p-6 rounded-2xl border-2 ${built ? 'border-sky-400 shadow-md' : 'border-slate-100 opacity-70'} flex flex-col items-center text-center transition hover:scale-105"><div class="w-16 h-16 rounded-full ${built ? 'bg-sky-100 text-sky-600' : 'bg-slate-100 text-slate-300'} flex items-center justify-center text-3xl mb-4"><i class="fa-solid fa-${info.icon}"></i></div><h3 class="font-bold text-lg text-slate-800">${info.name}</h3><p class="text-sm text-slate-500 mb-4">${info.desc}</p>${built ? `<span class="bg-green-100 text-green-700 px-3 py-1 rounded-full text-xs font-bold"><i class="fa-solid fa-check"></i> 已建設</span>` : `<button onclick="build('${key}', ${info.cost})" class="bg-sky-600 text-white px-4 py-2 rounded-lg text-sm font-bold hover:bg-sky-500 ${gameState.magicules < info.cost ? 'opacity-50 cursor-not-allowed' : ''}">建設 (${info.cost} <i class="fa-solid fa-bolt text-yellow-300"></i>)</button>`}</div>`
                        }).join('')}
                    </div>
                </div>`;
        }

        function build(key, cost) {
            if(gameState.magicules >= cost) { gameState.magicules -= cost; gameState.buildings[key] = true; saveGame(); renderCity(document.getElementById('main-container')); alert(`建設成功！${buildingsInfo[key].name} 加入了你的城邦！`); } else { alert("魔素不足！快去刷題賺取魔素吧！"); }
        }

        function renderSubject(id, container) {
            const data = studyData[id];
            const notes = notesData[id] || [];
            container.innerHTML = `
                <div class="max-w-6xl mx-auto space-y-8 animate-fade-in">
                    <div class="flex flex-col md:flex-row md:items-center justify-between gap-4">
                        <div><h2 class="text-3xl font-black text-slate-800 flex items-center gap-3"><span class="text-${data.color}-500"><i class="fa-solid fa-${data.icon}"></i></span>${data.title}</h2><p class="text-slate-500 mt-1">${data.summary}</p></div>
                        <button onclick="startQuiz('${id}')" class="bg-gradient-to-r from-${data.color}-500 to-${data.color}-600 text-white px-8 py-3 rounded-2xl font-bold shadow-lg shadow-${data.color}-200 transition hover:scale-105 flex items-center gap-2"><i class="fa-solid fa-khanda"></i> 討伐此單元</button>
                    </div>
                    <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                        <div class="lg:col-span-2 space-y-6">${notes.map(n => `<div class="note-card bg-white rounded-2xl p-6 border border-slate-100 shadow-sm"><h3 class="font-bold text-lg text-${data.color}-700 mb-3 flex items-center gap-2"><i class="fa-solid fa-scroll"></i> ${n.title}</h3><ul class="space-y-3">${n.details.map(d => `<li class="text-slate-600 text-sm pl-4 border-l-2 border-${data.color}-200 leading-relaxed">${d}</li>`).join('')}</ul></div>`).join('')}</div>
                        <div class="space-y-6"><div class="bg-white rounded-3xl shadow-xl border-4 border-slate-100 overflow-hidden min-h-[400px] flex flex-col"><div class="bg-slate-50 px-4 py-3 border-b border-slate-100 flex justify-between items-center"><span class="font-bold text-slate-700 text-sm"><i class="fa-solid fa-gamepad mr-2"></i>互動修煉場</span></div><div class="flex-1 relative bg-slate-50/50 p-4" id="tool-container">${getInteractiveTool(id)}</div></div></div>
                    </div>
                </div>`;
            setTimeout(() => {
                if(id === 'math') initSlimeClicker();
                if(id === 'biology') initBioDragDrop();
                if(id === 'geography') initGeoMap();
                if(window.MathJax) MathJax.typesetPromise();
            }, 100);
        }

        function getInteractiveTool(id) {
            if(id === 'math') return `<div class="text-center h-full flex flex-col items-center justify-center"><div class="text-sm text-slate-500 mb-4">點擊史萊姆進行指數分裂 ($$2^n$$)</div><div id="slime-container" class="relative w-full h-64 cursor-pointer" onclick="splitSlime()"><div class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 transition-all duration-200" id="main-slime"><div class="w-24 h-24 bg-sky-400 rounded-full flex items-center justify-center text-white font-black text-2xl shadow-lg shadow-sky-300 animate-bounce select-none">1</div></div></div><div class="mt-4 text-xl font-bold text-indigo-600">數量: <span id="slime-count">1</span> ($$2^0$$)</div><button onclick="resetSlime()" class="mt-4 text-xs text-slate-400 hover:text-red-500">Reset</button></div>`;
            if(id === 'biology') return `<div class="h-full flex flex-col"><div class="text-xs text-slate-500 mb-2">拖曳器官排列正確消化順序：</div><div id="bio-drop-zone" class="flex-1 border-2 border-dashed border-emerald-200 rounded-xl bg-emerald-50/50 p-4 flex flex-col gap-2 items-center justify-center drop-zone text-sm text-emerald-400 mb-4"><i class="fa-solid fa-arrow-down mb-1"></i> 請按順序拖入此處</div><div id="bio-source" class="flex flex-wrap gap-2 justify-center">${['胃','大腸','食道','小腸','口','肛門'].sort(()=>Math.random()-0.5).map(item => `<div class="draggable-item bg-white px-3 py-1 rounded-full shadow border border-slate-200 text-sm font-bold text-slate-600" draggable="true">${item}</div>`).join('')}</div><button onclick="checkBioOrder()" class="mt-4 w-full bg-emerald-500 text-white rounded-lg py-2 font-bold text-sm">檢查順序</button><div id="bio-result" class="text-center text-xs mt-2 h-4 font-bold"></div></div>`;
            if(id === 'geography') return `<div class="h-full flex flex-col items-center"><div class="text-xs text-slate-500 mb-2">拖曳標籤至正確區域 (北/中/南/東)：</div><div class="relative w-48 h-64 bg-slate-200 rounded-3xl my-2 flex flex-col border-4 border-white shadow-inner overflow-hidden"><div id="geo-n" class="flex-1 bg-blue-100/50 border-b border-white flex items-center justify-center text-xs text-slate-400 drop-zone" data-zone="n">北</div><div class="flex-1 flex"><div id="geo-w" class="w-2/3 bg-green-100/50 border-r border-white flex items-center justify-center text-xs text-slate-400 drop-zone" data-zone="w">西</div><div id="geo-e" class="w-1/3 bg-yellow-100/50 flex items-center justify-center text-xs text-slate-400 drop-zone" data-zone="e">東</div></div><div id="geo-s" class="flex-1 bg-red-100/50 border-t border-white flex items-center justify-center text-xs text-slate-400 drop-zone" data-zone="s">南</div></div><div id="geo-tags" class="flex flex-wrap gap-2 justify-center mt-2"><div class="draggable-item bg-white px-2 py-1 text-xs border rounded shadow" draggable="true" data-ans="n">盆地/岬灣</div><div class="draggable-item bg-white px-2 py-1 text-xs border rounded shadow" draggable="true" data-ans="w">沙岸/平原</div><div class="draggable-item bg-white px-2 py-1 text-xs border rounded shadow" draggable="true" data-ans="e">斷層/陡峭</div><div class="draggable-item bg-white px-2 py-1 text-xs border rounded shadow" draggable="true" data-ans="s">珊瑚礁/熱帶</div></div><div id="geo-result" class="text-center text-xs mt-2 h-4 font-bold text-sky-600"></div></div>`;
            if(id === 'civics') return `<div class="h-full flex flex-col items-center justify-center"><div class="text-sm text-slate-500 mb-4 font-bold">親戚稱謂計算機</div><div class="bg-white p-4 rounded-xl border border-rose-100 shadow-sm w-64"><div id="kin-result" class="text-center text-2xl font-bold text-rose-600 mb-4 h-8">?</div><div class="grid grid-cols-2 gap-2"><button class="kinship-btn" onclick="calcKin('爸爸的哥哥')">爸爸的哥哥</button><button class="kinship-btn" onclick="calcKin('媽媽的兄弟')">媽媽的兄弟</button><button class="kinship-btn" onclick="calcKin('姊妹的丈夫')">姊妹的丈夫</button><button class="kinship-btn" onclick="calcKin('哥哥的妻子')">哥哥的妻子</button></div></div></div>`;
            if(id === 'english') return `<div class="h-full flex flex-col items-center justify-center"><div class="text-sm text-slate-500 mb-4 font-bold">單字翻翻樂</div><div class="bg-white w-48 h-32 rounded-xl shadow-lg border border-blue-100 flex items-center justify-center cursor-pointer flip-card" onclick="flipWord(this)"><div class="text-2xl font-bold text-blue-600" id="word-card">Christmas</div></div><button class="mt-4 text-xs text-slate-400" onclick="nextWord()">下一個 (Next)</button></div>`;
            return `<div class="h-full flex items-center justify-center text-slate-400 text-sm">此學科暫無互動工具，請進行測驗。</div>`;
        }

        // --- INTERACTIVE LOGIC ---
        let slimeStep = 0;
        function initSlimeClicker() {
            slimeStep = 0;
            const c = document.getElementById('slime-container');
            if(c) {
                c.innerHTML = `<div class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 transition-all duration-200" id="main-slime"><div class="w-24 h-24 bg-sky-400 rounded-full flex items-center justify-center text-white font-black text-2xl shadow-lg shadow-sky-300 animate-bounce select-none">1</div></div>`;
                document.getElementById('slime-count').innerHTML = `1 ($$2^0$$)`;
                if(window.MathJax) MathJax.typesetPromise();
            }
        }
        function splitSlime() {
            if(slimeStep >= 6) return;
            slimeStep++;
            const count = Math.pow(2, slimeStep);
            document.getElementById('slime-count').innerHTML = `${count} ($$2^${slimeStep}$$)`;
            const c = document.getElementById('slime-container');
            c.innerHTML = '';
            for(let i=0; i<count; i++) {
                const s = document.createElement('div');
                s.className = "absolute w-8 h-8 bg-sky-400 rounded-full flex items-center justify-center text-white text-xs font-bold shadow-sm transition-all duration-500 animate-bounce";
                s.innerText = "1";
                s.style.top = `${Math.random()*80 + 10}%`; s.style.left = `${Math.random()*80 + 10}%`;
                c.appendChild(s);
            }
            if(window.MathJax) MathJax.typesetPromise();
        }
        function resetSlime() { initSlimeClicker(); }

        function initBioDragDrop() {
            const draggables = document.querySelectorAll('#bio-source .draggable-item');
            const dropZone = document.getElementById('bio-drop-zone');
            if(!dropZone) return;
            draggables.forEach(d => { d.addEventListener('dragstart', e => { e.dataTransfer.setData('text/plain', e.target.innerText); e.target.classList.add('opacity-50'); }); d.addEventListener('dragend', e => { e.target.classList.remove('opacity-50'); }); });
            dropZone.addEventListener('dragover', e => { e.preventDefault(); dropZone.classList.add('drag-over'); });
            dropZone.addEventListener('dragleave', e => { dropZone.classList.remove('drag-over'); });
            dropZone.addEventListener('drop', e => {
                e.preventDefault(); dropZone.classList.remove('drag-over');
                const data = e.dataTransfer.getData('text/plain');
                if(data && dropZone.children.length < 7) { const el = document.createElement('div'); el.className = "bg-white px-3 py-1 rounded shadow text-sm font-bold text-emerald-600 w-full text-center"; el.innerText = data; dropZone.appendChild(el); }
            });
        }
        function checkBioOrder() {
            const correct = ['口','食道','胃','小腸','大腸','肛門'];
            const user = Array.from(document.getElementById('bio-drop-zone').children).filter(el => el.tagName === 'DIV').map(el => el.innerText);
            const res = document.getElementById('bio-result');
            if(JSON.stringify(user) === JSON.stringify(correct)) { res.innerText = "正確！完美消化！(+10 魔素)"; res.className = "text-center text-xs mt-2 h-4 font-bold text-green-500"; gameState.magicules += 10; updateResourceUI(); } else { res.innerText = "順序錯誤，再試試看！"; res.className = "text-center text-xs mt-2 h-4 font-bold text-red-500"; }
        }

        function initGeoMap() {
            const tags = document.querySelectorAll('#geo-tags .draggable-item');
            const zones = document.querySelectorAll('.drop-zone');
            tags.forEach(t => { t.addEventListener('dragstart', e => { e.dataTransfer.setData('ans', e.target.dataset.ans); e.target.classList.add('opacity-50'); }); t.addEventListener('dragend', e => e.target.classList.remove('opacity-50')); });
            zones.forEach(z => { z.addEventListener('dragover', e => e.preventDefault()); z.addEventListener('drop', e => { e.preventDefault(); const ans = e.dataTransfer.getData('ans'); const targetZone = z.dataset.zone; const res = document.getElementById('geo-result'); if(ans === targetZone) { z.style.backgroundColor = '#bbf7d0'; z.innerText = "O"; res.innerText = "配置正確！(+5 魔素)"; gameState.magicules += 5; updateResourceUI(); } else { res.innerText = "位置不對喔..."; } }); });
        }

        // New Games
        function calcKin(rel) {
            const map = { '爸爸的哥哥': '伯父', '媽媽的兄弟': '舅舅', '姊妹的丈夫': '姊夫/妹夫', '哥哥的妻子': '嫂嫂' };
            document.getElementById('kin-result').innerText = map[rel];
        }
        
        const engWords = [
            {w:"Christmas", m:"聖誕節"}, {w:"Celebrate", m:"慶祝"}, {w:"Twelfth", m:"第12"}, {w:"Clap", m:"拍手"},
            {w:"Touch", m:"碰觸"}, {w:"Shoulder", m:"肩膀"}, {w:"Heavy", m:"重的"}, {w:"Wave", m:"揮手"}
        ];
        function flipWord(el) {
            const current = document.getElementById('word-card').innerText;
            const item = engWords.find(i => i.w === current || i.m === current);
            if(item) document.getElementById('word-card').innerText = (current === item.w) ? item.m : item.w;
        }
        function nextWord() {
            const r = engWords[Math.floor(Math.random() * engWords.length)];
            document.getElementById('word-card').innerText = r.w;
        }

        // --- QUIZ SYSTEM ---
        function openQuizSelector() {
            document.getElementById('quiz-modal').classList.remove('hidden');
            document.getElementById('quiz-selector').innerHTML = Object.values(studyData).map(s => `<button onclick="startQuiz('${s.id}')" class="flex flex-col items-center justify-center p-4 bg-white border-2 border-slate-100 rounded-2xl hover:border-${s.color}-400 hover:bg-${s.color}-50 transition group"><i class="fa-solid fa-${s.icon} text-3xl text-${s.color}-400 mb-2 group-hover:scale-110 transition"></i><span class="font-bold text-slate-600 text-sm">${s.title.split(' ')[0]}</span></button>`).join('');
            document.getElementById('quiz-selector').classList.remove('hidden');
            document.getElementById('quiz-question-view').classList.add('hidden');
            document.getElementById('quiz-results-view').classList.add('hidden');
            document.getElementById('quiz-footer').classList.add('hidden');
        }
        function closeQuizModal() { document.getElementById('quiz-modal').classList.add('hidden'); }
        
        // Randomize Options
        function startQuiz(id) {
            quizState.active = true; quizState.score = 0; quizState.hp = 3; quizState.index = 0;
            const allQ = qDB[id] || [];
            quizState.questions = [...allQ].sort(() => 0.5 - Math.random()).slice(0, 10);
            
            // Randomize options for each selected question
            quizState.questions.forEach(q => {
                const options = q.a.map((opt, i) => ({ text: opt, isCorrect: i === q.c }));
                options.sort(() => 0.5 - Math.random());
                q.shuffledOptions = options;
            });

            document.getElementById('quiz-hp').innerText = quizState.hp;
            document.getElementById('quiz-selector').classList.add('hidden');
            document.getElementById('quiz-question-view').classList.remove('hidden');
            document.getElementById('quiz-footer').classList.remove('hidden');
            renderQuizQuestion();
        }

        function renderQuizQuestion() {
            const q = quizState.questions[quizState.index];
            if(!q) { endQuiz(); return; }
            const pct = (quizState.index / quizState.questions.length) * 100;
            document.getElementById('quiz-progress-bar').style.width = `${pct}%`;
            
            document.getElementById('question-card').innerHTML = `
                <h4 class="text-xl font-bold text-slate-800 mb-6 leading-relaxed">${q.q}</h4>
                <div class="grid gap-3">
                    ${q.shuffledOptions.map((opt, i) => `
                        <button onclick="answer(${i})" id="opt-${i}" class="w-full text-left p-4 rounded-xl border-2 border-slate-100 hover:border-sky-400 hover:bg-sky-50 font-bold text-slate-600 transition relative overflow-hidden group">
                            <span class="z-10 relative flex items-center">
                                <span class="w-6 h-6 rounded-full bg-slate-200 text-slate-500 text-xs flex items-center justify-center mr-3">${String.fromCharCode(65+i)}</span>
                                ${opt.text}
                            </span>
                        </button>
                    `).join('')}
                </div>
                <div id="quiz-feedback" class="hidden mt-4 bg-slate-50 p-4 rounded-xl text-sm border border-slate-200">
                    <div class="font-bold mb-1" id="fb-title"></div>
                    <div class="text-slate-600">${q.r}</div>
                </div>
            `;
            document.getElementById('btn-next').disabled = true; document.getElementById('btn-next').classList.add('opacity-50', 'cursor-not-allowed'); document.getElementById('btn-use-herb').classList.remove('hidden');
            if(window.MathJax) MathJax.typesetPromise();
        }

        function answer(selectedIndex) {
            const q = quizState.questions[quizState.index];
            const isCorrect = q.shuffledOptions[selectedIndex].isCorrect;
            
            // Find correct index in shuffled array
            const correctIndex = q.shuffledOptions.findIndex(o => o.isCorrect);

            // Disable buttons
            q.shuffledOptions.forEach((_, i) => document.getElementById(`opt-${i}`).disabled = true);
            
            document.getElementById('quiz-feedback').classList.remove('hidden');
            
            if(isCorrect) {
                quizState.score++;
                document.getElementById(`opt-${selectedIndex}`).classList.add('bg-green-100', 'border-green-500', 'text-green-800');
                document.getElementById('fb-title').innerHTML = `<span class="text-green-600"><i class="fa-solid fa-check"></i> 正確！</span>`;
            } else {
                quizState.hp--;
                document.getElementById('quiz-hp').innerText = quizState.hp;
                document.getElementById(`opt-${selectedIndex}`).classList.add('bg-red-100', 'border-red-500', 'text-red-800');
                document.getElementById(`opt-${correctIndex}`).classList.add('bg-green-100', 'border-green-500');
                document.getElementById('fb-title').innerHTML = `<span class="text-red-500"><i class="fa-solid fa-xmark"></i> 錯誤！</span>`;
            }
            
            document.getElementById('btn-next').disabled = false;
            document.getElementById('btn-next').classList.remove('opacity-50', 'cursor-not-allowed');
            document.getElementById('btn-use-herb').classList.add('hidden');
            
            if(quizState.hp <= 0) setTimeout(endQuiz, 1500);
            if(window.MathJax) MathJax.typesetPromise();
        }

        function useHerb() {
            if(gameState.herbs > 0) {
                gameState.herbs--; updateResourceUI();
                const q = quizState.questions[quizState.index];
                const correctIndex = q.shuffledOptions.findIndex(o => o.isCorrect);
                document.getElementById(`opt-${correctIndex}`).classList.add('ring-2', 'ring-green-400');
            } else { alert("草藥不足！"); }
        }

        function nextQuestion() { quizState.index++; if(quizState.index >= quizState.questions.length) endQuiz(); else renderQuizQuestion(); }
        
        function endQuiz() {
            document.getElementById('quiz-question-view').classList.add('hidden'); document.getElementById('quiz-footer').classList.add('hidden'); document.getElementById('quiz-results-view').classList.remove('hidden');
            const isWin = quizState.hp > 0;
            const magicEarned = isWin ? quizState.score * 10 : Math.floor(quizState.score * 2);
            const herbsEarned = isWin ? Math.floor(quizState.score / 3) : 0;
            gameState.magicules += magicEarned; gameState.herbs += herbsEarned; saveGame();
            document.getElementById('result-msg').innerText = isWin ? "討伐大成功！獲得了戰利品。" : "討伐失敗...請重整旗鼓再來。";
            document.getElementById('reward-magic').innerText = `+${magicEarned}`; document.getElementById('reward-herb').innerText = `+${herbsEarned}`;
            // IMPORTANT: Using generic placeholder image for the popup. User can replace the src.
            document.getElementById('result-icon-container').innerHTML = isWin ? 
                `<div class="victory-img-container"><img src="rimuru_victory.png" onerror="this.src='https://cdn-icons-png.flaticon.com/512/4712/4712009.png'" class="w-40 h-40 object-contain mx-auto" alt="Victory"></div>` : 
                `<div class="text-6xl text-slate-300"><i class="fa-solid fa-skull"></i></div>`;
        }
    </script>
</body>
</html>
